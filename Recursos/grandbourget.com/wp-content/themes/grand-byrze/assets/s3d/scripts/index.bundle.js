!function(t){function e(e){for(var a,i,s=e[0],l=e[1],c=e[2],u=0,f=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);for(d&&d(e);f.length;)f.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},o={0:0},r=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=l;r.push([72,1]),n()}({32:function(t){t.exports=JSON.parse('{"translation":{"ctr":{"title":"3d модель","chooseOfApartment":"Вибор по </br> квартире","chooseOfFloor":"Вибор по </br> этажу","repeatHelp":"Повторить обучение","filterBtn":"Подбор по параметрам","nav":{"title":"Меню 3D","flyby--name":"3D модель","genplan":"Общий","flyby_1_outside":"Дом 4","flyby_2_outside":"Дом 5","plannings":"Планировки","floor":"План этажа","flat":"Квартира"}},"Helper":{"slide-0--title":"Удерживай и вращай","slide-1--title":"Фильтруй","slide-2--title":"пользуйся навигацией","close":"Пропустить обучение"},"Filter":{"title":"Подбор по параметрам","reset":"Очистить","apply":"Применить","hide":"Скрить","show":"Показать","from":"от","to":"до","free":"Доступны к продаже"},"Flat":{"buttons":{"with":"с мебелью","without":"без мебели","re-planning":"без стен"},"2d":"план схема","3d":"3D планировка","goToFloor":"Перейти к плану этажа"},"infrastructure":{"trc":"торгово-розвлекательний центр","kinder":"Детский садик","default":"$t(sold)"},"peculiarity":{"repair":"ремонт","terrace":"терасса"},"floor__info--title":"Этаж","floor__all--flats":"Всего квартир","floor__free--flats":"Свободных","plannings--title":"Планировки","favourite--title":"избранное","apartments_0":"квартира","apartments_1":"квартиры","apartments_2":"квартир","favourite--added":"Вы добавили в избранное $t(apartments, {\\"count\\": {{apartments}} })","favourite--add":"В избранное","area":"Площадь","allArea":"Общая площадь","type":"Тип","floor":"Этаж","build":"Дом","rooms":"Комнат","section":"Cекция","apartment--number":"Номер","count--rooms":"комнатая","card--link":"Детальней","showIn3d":"Посмотреть на 3D модели","pdf":"PDF","found":"Найдено","found--from":"из","notFound":"Но посмотрите на эти квартиры","sold":"Все квартиры проданы","flatSold":"Квартира продана","flatClosed":"Продажи не открыты","number--flyby":"Дом №","3dTour":"3д тур","callback--1":"Связатся с менеджером","PopupFlyby":{"title":"Кв.","description":"Планировка находиться на другом доме. Для просмотра его на 3D модели вам нужно переключится на другой дом.","btn":"Сменить ракурс"},"Floor":{"miniInfo":{"rooms":"ком:","area":"пл."}}}}')},33:function(t){t.exports=JSON.parse('{"translation":{"ctr":{"title":"3d модель","chooseOfApartment":"Вибір за </br> квартирою","chooseOfFloor":"Вибір за </br> поверхом","repeatHelp":"Повторити навчання","filterBtn":"Підбір за </br> параметрами","nav":{"title":"Меню 3D","flyby--name":"3D модель","genplan":"Загальний","flyby_1_outside":"Будинок 4","flyby_2_outside":"Будинок 5","plannings":"Планування","floor":"План поверху","flat":"Квартира"}},"Helper":{"slide-0--title":"Утримуй та обертай","slide-1--title":"Фільтруй","slide-2--title":"користуйся навігацією","close":"Пропустити навчання"},"Filter":{"title":"підбір за параметрами","reset":"Очистити","apply":"Застосувати","hide":"Скрити","show":"Показати","from":"від","to":"до","free":"Доступні для продажу"},"Flat":{"buttons":{"with":"з меблями","without":"без меблів","re-planning":"без стін"},"2d":"план схема","3d":"3D планування","goToFloor":"Перейти до плану поверху"},"infrastructure":{"trc":"торгово-розважальний центр","kinder":"Дитячий садок","default":"$t(sold)"},"peculiarity":{"repair":"ремонт","terrace":"терасса"},"floor__info--title":"Поверх","floor__all--flats":"Всього квартир","floor__free--flats":"Вільних","plannings--title":"Планування","favourite--title":"улюблене","apartments_0":"квартира","apartments_1":"квартиры","apartments_2":"квартир","favourite--added":"ви додали до улюбленого $t(apartments, {\\"count\\": {{apartments}} })","favourite--add":"У обране","area":"Площа","allArea":"Загальна площа","type":"Тип","floor":"Поверх","build":"Будинок","rooms":"Кімнат","section":"Cекцiя","apartment--number":"Номер","count--rooms":"кімнатна","card--link":"Детальніше","showIn3d":"Переглянути на 3D моделі","pdf":"PDF","found":"Знайдено","found--from":"з","notFound":"Але подивіться на ці квартири","sold":"Усі квартири продані","flatSold":"Квартира продана","flatClosed":"Продажі не відкриті","number--flyby":"Будинок №","3dTour":"3д тур","callback--1":"Зв’язатись з менеджером","PopupFlyby":{"title":"Кв.","description":"Планування знаходиться на іншому будинку. Для перегляду його на 3D моделі вам треба перемкнутися на інший будинок.","btn":"Змінити ракурс"},"Floor":{"miniInfo":{"rooms":"кім:","area":"пл."}}}}')},34:function(t){t.exports=JSON.parse('{"translation":{"ctr":{"title":"3d модель","chooseOfApartment":"Вибір за </br> квартирою","chooseOfFloor":"Вибір за </br> поверхом","repeatHelp":"Повторити навчання","filterBtn":"Підбір за </br> параметрами","nav":{"title":"Меню 3D","flyby--name":"3D модель","genplan":"Загальний","flyby_1_outside":"Будинок 4","flyby_2_outside":"Будинок 5","plannings":"Планування","floor":"План поверху","flat":"Квартира"}},"Helper":{"slide-0--title":"Утримуй та обертай","slide-1--title":"Фільтруй","slide-2--title":"користуйся навігацією","close":"Пропустити навчання"},"Filter":{"title":"підбір за параметрами","reset":"Очистить","apply":"Застосувати","hide":"Скрити","show":"Показати","from":"от","to":"до","free":"Available for sale"},"Flat":{"buttons":{"with":"с мебелью","without":"без мебели","re-planning":"без стен"},"2d":"план схема","3d":"3D планування","goToFloor":"Перейти до плану поверху"},"infrastructure":{"trc":"торгово-розважальний центр","kinder":"Kindergarten","default":"$t(sold)"},"peculiarity":{"repair":"ремонт","terrace":"терасса"},"floor__info--title":"Поверх","floor__all--flats":"Всього квартир","floor__free--flats":"Вільних","plannings--title":"Планування","favourite--title":"улюблене","apartments_0":"квартира","apartments_1":"квартиры","apartments_2":"квартир","favourite--added":"Ви додали до улюбленого $t(apartments, {\\"count\\": {{apartments}} })","favourite--add":"В избранное","area":"Площа","allArea":"Загальна площа","type":"Тип","floor":"Поверх","build":"Будинок","rooms":"Кімнат","section":"Cекцiя","apartment--number":"Номер","count--rooms":"кімнатна","card--link":"Детальніше","showIn3d":"Переглянути на 3D моделі","pdf":"PDF","found":"Знайдено","found--from":"из","notFound":"Але подивіться на ці квартири","sold":"All apartments are sold","flatSold":"Flat sold","flatClosed":"sale is not open","number--flyby":"Build №","3dTour":"3д тур","callback--1":"Зв’язатись з менеджером","PopupFlyby":{"title":"Кв.","description":"Планування знаходиться на іншому будинку. Для перегляду його на 3D моделі вам треба перемкнутися на інший будинок.","btn":"Змінити ракурс"},"Floor":{"miniInfo":{"rooms":"кім:","area":"пл."}}}}')},72:function(t,e,n){"use strict";n.r(e);var a=n(10),o=n.n(a),r=n(11),i=n.n(r),s=n(7),l=n.n(s),c=n(0),d=n.n(c),u=n(35),f=n(31),p=n.n(f),h=n(32),v=n(33),m={ru:h,en:n(34),uk:v},y=function(t,e,n){var a=[],o=0,r="".concat(defaultModulePath,"/").concat(e.imageUrl).concat(e.activeSlide||43,".jpg"),i=new Image;!function t(e){var n=(new Date).getTime();if(o<2)i.src="".concat(r,"?t=").concat(n),i.onload=function(){var r=(new Date).getTime()-n;a[o]=r,t(e),o++},i.onerror=function(){var r=(new Date).getTime()-n;a[o]=r,t(e),o++};else{var s=a.reduce((function(t,e){return t+e}))/a.length;e(s)}}((function(e){return t({fastSpeed:e<=70,middleTime:e,checkImage:43}),e}))},g=function(){return"ios"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mobile")?/iPhone|iPad|iPod/.test(navigator.userAgent):navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android|webOS|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini|iPhone|iPad|iPod/.test(navigator.userAgent)},b=function(){var t,e=function(t){for(var e=0;e<t.length;e++){var n=t[e].string,a=t[e].prop;if(n){if(-1!=n.indexOf(t[e].subString))return t[e].identity}else if(a)return t[e].identity}}([{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}])||"an unknown OS",n=navigator.userAgent,a=n.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(a[1])?{name:"IE",version:(t=/\brv[ :]+(\d+)/g.exec(n)||[])[1]||"",platform:e}:"Chrome"===a[1]&&null!=(t=n.match(/\b(OPR|Edge)\/(\d+)/))?{name:t[1].replace("OPR","Opera"),version:t[2],platform:e}:(a=a[2]?[a[1],a[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=n.match(/version\/(\d+)/i))&&a.splice(1,1,t[1]),{name:a[0],version:a[1],platform:e})},w=function(t,e){var n=document.createElement(t);return n.classList=e.class||"",e.id&&(n.id=e.id),e.style&&(n.style.cssText=e.style),e.value&&(n.value=e.value),e.type&&(n.type=e.type),e.placeholder&&(n.placeholder=e.placeholder),e.content&&(n.innerHTML=e.content),n},F=n(2),k=n.n(F),j=n(3),x=n.n(j),S=n(6),P=n.n(S);function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function O(t,e){d()(t).addClass("s3d-blur"),setTimeout((function(){d()(t).removeClass("s3d-blur")}),e||700)}var B=function(){var t={showing:!1,mini:!1};return{show:function(){t.showing=!0,d()(".fs-preloader").addClass("preloader-active"),d()(".fs-preloader-bg").css({filter:"blur(10px)"})},hide:function(){t.showing=!1,setTimeout((function(){d()(".fs-preloader").removeClass("preloader-active"),d()(".fs-preloader-bg").css({filter:"none"})}),200)},turnOn:function(t){t&&t.length>0?t.addClass("s3d-unActive").prop("disabled",!0):[".s3d__button",'.s3d-nav__btn[data-type="plannings"]',".js-s3d-controller__openFilter"].forEach((function(t){d()(t).addClass("s3d-unActive").prop("disabled",!0)}))},turnOff:function(t){t&&t.length>0?t.removeClass("s3d-unActive").prop("disabled",!1):[".s3d__button",'.s3d-nav__btn[data-type="plannings"]',".js-s3d-controller__openFilter"].forEach((function(t){d()(t).removeClass("s3d-unActive").prop("disabled",!1)}))},miniOn:function(){t.mini=!0,d()(".js-fs-preloader-before").addClass("preloader-active")},miniOff:function(){t.mini=!1,d()(".js-fs-preloader-before").removeClass("preloader-active")},checkState:function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){P()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t)}}}();function I(){return{isAnimating:!1,show:function(){var t=this;this.isAnimating=!0,d()(".js-s3d-preloader").addClass("preloader-active"),setTimeout((function(){t.isAnimating=!1}))},hide:function(){var t=this;this.isAnimating?setTimeout((function(){t.hide()}),500):d()(".js-s3d-preloader").removeClass("preloader-active")}}}function A(t,e){return function(n){var a=this.lastCall;this.lastCall=Date.now(),a&&this.lastCall-a<=e&&clearTimeout(this.lastCallTimer),this.lastCallTimer=setTimeout((function(){return t(n)}),e)}}function L(t,e){return e.target.closest(t)}var T=function(){function t(e,n){var a=this;k()(this,t),P()(this,"deb",A((function(){return a.resize()}),300)),this._model=e,this._view=n,n.on("chooseSlider",(function(t){return a._model.selectSlideHandler(t)})),n.on("resize",(function(){return a.deb()})),n.on("clickBackHandler",(function(){window.history.back()})),n.on("chooseHandler",(function(t){a._model.changeChooseActive(t)})),n.on("clickToHomeHandler",(function(){a._model.history.update(e.defaultFlybySettings),e.updateFsm(e.defaultFlybySettings)}))}return x()(t,[{key:"resize",value:function(){this._model.iteratingConfig()}}]),t}(),E=n(14),D=n.n(E),H=n(12),R=n.n(H),$=n(8),M=n.n($),q=n(9),W=n.n(q),N=n(4),U=n.n(N),V=n(76),z=n(5),K=function(){function t(){k()(this,t),this._events={}}return x()(t,[{key:"on",value:function(t,e){return(this._events[t]||(this._events[t]=[])).push(e),this}},{key:"emit",value:function(t,e){(this._events[t]||[]).slice().forEach((function(t){return t(e)}))}}]),t}(),G=function(){function t(e){k()(this,t),this.activeSlide=e.activeElem,this.setActiveSvg=e.setSvgActive,this.type=e.type,this.setting=e.settings,this.wrapper=e.wrapper,this.controlPoint=e.controlPoint,this.hoverData$=e.hoverData$,this.typeSelectedFlyby$=e.typeSelectedFlyby$}return x()(t,[{key:"init",value:function(){var t=i()(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.wrapper.find(".s3d__svg-container").remove(),t.next=3,this.createSvg(this.controlPoint,this.type,this.typeSelectedFlyby$);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"createSvg",value:function(){var t=i()(l.a.mark((function t(e,n,a){var o,r,i=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=createMarkup("div",{class:"s3d__svg-container js-s3d__svg-container__".concat(n)}),this.wrapper.find(".js-s3d__wrapper__canvas").append(o),r=e.map((function(t){return new Promise((function(e){var n=document.createElement("div");+t==+i.activeSlide?n.classList="s3d__svgWrap js-s3d__svgWrap ".concat(i.type,"__").concat(t," s3d__svg__active"):n.classList="s3d__svgWrap js-s3d__svgWrap ".concat(i.type,"__").concat(t),n.dataset.id=t,d()(o).append(n);var r;r=i.setting.type&&i.setting.flyby&&i.setting.side?"".concat(defaultModulePath,"/images/svg/").concat(a.value,"/").concat(i.setting.type,"/").concat(i.setting.flyby,"/").concat(i.setting.side,"/").concat(t,".svg"):"".concat(defaultModulePath,"/images/svg/").concat(i.setting.type,"/").concat(t,".svg");var s="".concat(defaultModulePath,"/images/svg/default.svg");d.a.ajax(r).done((function(t){d()(n).append(t.documentElement),e()})).fail((function(t,a){d.a.ajax(s).done((function(t){d()(n).append(t.documentElement),e()})).fail((function(t){console.error(t)}))}))}))})),t.abrupt("return",Promise.all(r));case 4:case"end":return t.stop()}}),t,this)})));return function(e,n,a){return t.apply(this,arguments)}}()}]),t}();function J(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?J(Object(n),!0).forEach((function(e){P()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var X=function(t){M()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=U()(t);if(e){var o=U()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return W()(this,n)}}(n);function n(t){var a;return k()(this,n),a=e.call(this),P()(R()(a),"mappingSelectedTypePoly",{floor:function(){a.emit("filteredPolygonRemoveClass");var t=a.currentFilteredFloorsData$.value;a.emit("showSelectedFloors",t)},flat:function(){a.emit("filteredPolygonRemoveClass");var t=a.currentFilteredFlatIds$.value;a.emit("showSelectedFlats",t)}}),a.type=t.type,a.id=t.id,a.settings=t.settings,a.browser=t.browser,a.imageUrl=t.imageUrl,a.activeElem=t.activeSlide,a.controlPoint=t.controlPoint,a.getFlat=t.getFlat,a.activeFlat=t.activeFlat,a.hoverData$=t.hoverData$,a.numberSlide=t.numberSlide,a.infoBox=t.infoBox,a.typeSelectedFlyby$=t.typeSelectedFlyby$,a.currentFilteredFlatIds$=t.currentFilteredFlatIds$,a.currentFilteredFloorsData$=t.currentFilteredFloorsData$,a.compass=t.compass,a.currentCompassDeg=0,a.startDegCompass=t.startDegCompass,a.updateFsm=t.updateFsm,a.wrapper=t.wrapper,a.wrapperEvent=".js-s3d__svgWrap",a.ctx=a.wrapper.find("#js-s3d__".concat(a.id))[0].getContext("2d"),a.height=1080,a.width=1920,a.x=0,a.pret=0,a.amountSlideForChange=0,a.arrayImages=[],a.mouseSpeed=t.mouseSpeed,a.rotateSpeedDefault=t.rotateSpeedDefault,a.rotateSpeed=t.rotateSpeed,a.nearestControlPoint={min:t.numberSlide.min,max:t.numberSlide.max},a.isKeyDown=!1,a.isRotating$=new V.a(!1),a.activeSvg=null,a.animates=function(){},a.Activebuild=t.Activebuild,a.progress=0,a.preloader=B,a.preloaderWithoutPercent=I(),a.browser=t.browser,a.init=a.init.bind(R()(a)),a.changeNext=a.changeNext.bind(R()(a)),a.changePrev=a.changePrev.bind(R()(a)),a.toSlideNum=a.toSlideNum.bind(R()(a)),a.setSvgActive=a.setSvgActive.bind(R()(a)),a}return x()(n,[{key:"sliderRotateEnd",value:function(t){t.target.classList.contains("s3d__button")||t.target.classList.contains("s3d-infoBox__link")||(this.activeAnimateFrame(!1),this.isKeyDown&&(this.isKeyDown=!1,this.emit("changeContainerCursor","grab"),this.controlPoint.includes(this.activeElem)?(this.changeSvgActive(this.activeElem),this.emit("showActiveSvg"),this.infoBox.disable(!1)):this.checkDirectionRotate()))}},{key:"sliderRotateStart",value:function(t){t.target.classList.contains("s3d__button")||this.isRotating$.value||t.target.classList.contains("s3d-infoBox__link")||(this.isKeyDown=!0,this.emit("changeContainerCursor","grabbing"),this.cancelAnimateSlide(),this.writingStartPosCursor.call(this,t),this.activeAnimateFrame(!0))}},{key:"mouseMoveHandler",value:function(t){if(!this.isRotating$.value)if(this.isKeyDown)this.infoBox.disable(!0),this.emit("hideActiveSvg"),this.checkMouseMovement.call(this,t);else if("polygon"===t.target.tagName){var e=Z({},t.target.dataset);this.infoBox.updatePosition(t),this.infoBox.changeState("hover",e)}else this.infoBox.changeState("static")}},{key:"touchPolygonHandler",value:function(t){var e=this;if(t.preventDefault(),!this.isRotating$.value){var n={section:function(n){return e.updateFsm(Z({type:n},t.currentTarget.dataset))},flyby:function(n){return e.updateFsm(Z({type:n},t.currentTarget.dataset))},floor:function(n){return e.updateFsm(Z({type:n},t.currentTarget.dataset))},flat:function(n){return e.updateFsm(Z({type:n},t.currentTarget.dataset))}},a=t.currentTarget.dataset,o=a.type,r=a.id;if("flat"===o){if(!r)return;if(1!==this.getFlat(+r).sale)return}this.infoBox.changeState("static"),n[o]&&n[o](o)}}},{key:"touchPolygonMobileHandler",value:function(t){if(t.preventDefault(),!this.isRotating$.value){var e=Z({},t.target.dataset);this.emit("showSelectPolygon",t.target),this.infoBox.changeState("hover",e)}}},{key:"keyPressHandler",value:function(t){var e;switch(t.keyCode){case 37:case 100:e="prev";break;case 39:case 102:e="next";break;default:return!1}return this.checkDirectionRotate(e),!0}},{key:"getSvgActive",value:function(){return this.activeSvg}},{key:"setSvgActive",value:function(t){this.activeSvg="string"==typeof t||"number"==typeof t?d()(".".concat(this.type,"__").concat(t)):t}},{key:"changeSvgActive",value:function(t){this.setSvgActive(t),this.emit("changeSvgActive",this.getSvgActive())}},{key:"init",value:function(t,e){var n=this;t&&e&&e.length>0&&(this.activeElem=+e[0],this.hoverData$.next({id:t}),this.emit("changeFlatActive",t)),this.emit("createBackground"),this.emit("createArrow"),this.isRotating$.subscribe((function(t){n.infoBox.disable(t)})),this.typeSelectedFlyby$.subscribe(function(){var t=i()(l.a.mark((function t(e){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new G(n),t.next=3,a.init();case 3:n.setSvgActive(n.activeElem),(0,n.mappingSelectedTypePoly[e])();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.currentFilteredFloorsData$.subscribe((function(t){(0,n.mappingSelectedTypePoly.floor)()})),this.currentFilteredFlatIds$.subscribe((function(t){(0,n.mappingSelectedTypePoly.flat)()})),this.uploadPictures(),this.emit("changeContainerCursor","grab"),this.deb=A(this.resizeCanvas.bind(this),400),document.addEventListener("resize",(function(){n.deb(n)}))}},{key:"updateCompass",value:function(t){t&&(this.currentCompassDeg=360/this.numberSlide.max*t+360/this.numberSlide.max*this.startDegCompass),this.compass(this.currentCompassDeg)}},{key:"uploadPictures",value:function(){var t=i()(l.a.mark((function t(){var e,n,a=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isRotating$.next(!0),this.preloader.turnOn(this.wrapper.find(".s3d__button")),this.preloader.turnOn(d()(".s3d-ctr__option .js-s3d-nav__btn")),this.ctx.canvas.width=this.width,this.ctx.canvas.height=this.height,this.uploadPicture=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=a,r=new Image,i=new Promise((function(a,i){r.dataset.id=t,r.onload=function(){o.arrayImages[t]=this,o.progressBarUpdate(),e&&e(r),a(r)},r.onerror=function(t){5===n?(o.sendResponsiveError(this,o),i(t)):o.uploadPicture(+this.dataset.id,a,n+1)}}));return r.src="".concat(defaultModulePath,"/").concat(o.imageUrl).concat(t,".jpg"),i},e=[],t.next=9,this.uploadPicture(this.activeElem,(function(t){a.updateCompass(a.activeElem),a.ctx.drawImage(t,0,0,a.width,a.height),setTimeout((function(){a.preloader.hide(),a.preloader.miniOn()}),300),a.resizeCanvas()}));case 9:for(n=0;n<=this.numberSlide.max;n++)e[n]=this.uploadPicture(n);Promise.all(e).then((function(t){a.arrayImages=t,a.resizeCanvas(),setTimeout((function(){a.preloader.miniOff(),a.preloader.turnOff(d()(a.wrapper).find(".s3d__button")),a.preloader.turnOff(d()(".s3d-ctr__option .js-s3d-nav__btn"))}),500),a.isRotating$.next(!1),a.changeSvgActive(a.activeElem),a.emit("showActiveSvg"),a.infoBox.disable(!1),a.activeFlat&&(a.emit("changeFlatActive",a.hoverData$.value),a.infoBox.changeState("active",{id:a.activeFlat}))})).catch((function(t){console.log(t)}));case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"sendResponsiveError",value:function(t,e){var n=Object.assign(e.browser,{project:"template--wp",url:t.src||t.dataset.id||"пусто",type:"error",text:"new"});d.a.ajax("/wp-admin/admin-ajax.php",{method:"POST",data:{data:n,action:"3dDebuger"}}).then((function(t){return console.log(t)}))}},{key:"progressBarUpdate",value:function(){var t=this;if(this.progress>=this.numberSlide.max)setTimeout((function(){t.emit("progressBarHide")}),300);else{this.progress+=1;var e=this.progress*(100/(this.numberSlide.max+1));this.emit("updateLoaderProgress",Math.ceil(e))}}},{key:"resizeCanvas",value:function(){var t=this.width/this.height,e=this.height/this.width,n=d()("#js-s3d__".concat(this.id)),a=this.wrapper.width(),o=this.wrapper.height();this.width/a<this.height/o?(n.width(a),n.height(a*e)):(n.height(o),n.width(o*t)),this.centerSlider(this.wrapper[0])}},{key:"centerSlider",value:function(t){var e=(t.scrollWidth-document.documentElement.offsetWidth)/2;this.wrapper.scrollLeft(e)}},{key:"writingStartPosCursor",value:function(t){this.x=t.pageX||t.targetTouches[0].pageX,this.pret=t.pageX||t.targetTouches[0].pageX}},{key:"getNumSvgWithFlat",value:function(t){var e=d()(".js-s3d__svgWrap polygon[data-id=".concat(t,"]")).map((function(t,e){return+e.closest(".js-s3d__svgWrap").dataset.id})).toArray();return null!=e?e:[]}},{key:"toSlideNum",value:function(t,e){var n,a=!0;e&&(a=!e.includes(this.activeElem),n=e),a&&this.checkDirectionRotate(void 0,n),this.hoverData$.next({id:t}),this.emit("changeFlatActive",{id:t}),this.scrollWrapToActiveFlat(this.determinePositionActiveFlat(t,n[0])),this.infoBox.changeState("active",{id:t})}},{key:"repeatChangeSlide",value:function(t,e){var n=this;this.isRotating$.next(!0);var a=this.rotateSpeed.reduce((function(t,a){return a.min===e&&a.max===n.activeElem||a.max===e&&a.min===n.activeElem?a.ms:t}),this.rotateSpeedDefault);return setInterval((function(){t(),n.activeElem===e&&(n.cancelAnimateSlide(),n.changeSvgActive(e),n.emit("showActiveSvg"),n.emit("changeFlatActive",n.hoverData$.value),n.infoBox.disable(!1),n.isRotating$.next(!1),n.amountSlideForChange=0)}),a)}},{key:"showDifferentPointWithoutRotate",value:function(t,e){var n;if((n=t||this.getNumSvgWithFlat(e))&&0!==n.length){this.rewindToPoint(n);var a=n[0];this.ctx.drawImage(this.arrayImages[a],0,0,this.width,this.height),this.activeElem=a,this.changeSvgActive(a),this.emit("showActiveSvg"),this.isRotating$.next(!1),e&&(this.hoverData$.next({id:e}),this.emit("changeFlatActive",{id:e}),this.infoBox.changeState("active",{id:e}))}}},{key:"checkDirectionRotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.controlPoint;if(!this.isRotating$.value){this.emit("hideActiveSvg"),this.rewindToPoint(e);var n,a=this.checkResult(e,t);n="next"===a.direction?this.changeNext:this.changePrev,this.repeat=this.repeatChangeSlide(n,a.nextPoint)}}},{key:"checkResult",value:function(t,e){return"next"===e||void 0===e&&(this.nearestControlPoint.max-this.nearestControlPoint.min)/2+this.nearestControlPoint.min<=this.activeElem?this.nearestControlPoint.max<=this.numberSlide.max?{direction:"next",nextPoint:this.nearestControlPoint.max}:{direction:"next",nextPoint:t[0]}:this.nearestControlPoint.min>this.numberSlide.min?{direction:"prev",nextPoint:this.nearestControlPoint.min}:{direction:"prev",nextPoint:t[t.length-1]}}},{key:"determinePositionActiveFlat",value:function(t,e){var n=d()(".js-s3d__svgWrap[data-id=".concat(e,"] polygon[data-id=").concat(t,"]"));if(0===Object(z.size)(n))return 0;var a=n[0].getBBox().x+n[0].getBoundingClientRect().width/2-document.documentElement.offsetWidth/2;return a<0?0:a}},{key:"scrollWrapToActiveFlat",value:function(t){this.wrapper.scrollLeft(t)}},{key:"cancelAnimateSlide",value:function(){clearInterval(this.repeat),this.repeat=void 0,this.nearestControlPoint.min=this.numberSlide.min,this.nearestControlPoint.max=this.numberSlide.max}},{key:"changeNext",value:function(){this.activeElem===this.numberSlide.max?(this.nearestControlPoint.max=this.controlPoint[0],this.nearestControlPoint.min=-1,this.activeElem=this.numberSlide.min):this.activeElem++,this.updateCompass(this.activeElem),this.ctx.drawImage(this.arrayImages[this.activeElem],0,0,this.width,this.height)}},{key:"changePrev",value:function(){this.activeElem===this.numberSlide.min?(this.nearestControlPoint.max=this.numberSlide.max+1,this.nearestControlPoint.min=this.controlPoint[this.controlPoint.length-1],this.activeElem=this.numberSlide.max):this.activeElem--,this.updateCompass(this.activeElem),this.ctx.drawImage(this.arrayImages[this.activeElem],0,0,this.width,this.height)}},{key:"checkMouseMovement",value:function(t){var e;this.x=null!==(e=t.pageX)&&void 0!==e?e:t.targetTouches[0].pageX;var n=(this.x-this.pret)/(window.innerWidth/this.numberSlide.max/this.mouseSpeed);this.amountSlideForChange+=window.parseInt(n.toFixed(0))}},{key:"rewindToPoint",value:function(t){var e=this;return this.cancelAnimateSlide(),t.forEach((function(t){+t<e.activeElem&&+t>e.nearestControlPoint.min?e.nearestControlPoint.min=+t:+t>e.activeElem&&+t<e.nearestControlPoint.max&&(e.nearestControlPoint.max=+t)})),0===this.nearestControlPoint.min&&(this.nearestControlPoint.min=t[t.length-1]-this.numberSlide.max),this.nearestControlPoint.max===this.numberSlide.max&&(this.nearestControlPoint.max=t[0]+this.numberSlide.max),!t.includes(this.activeElem)}},{key:"activeAnimateFrame",value:function(t){t?this.animates=this.animate():window.cancelAnimationFrame(this.animates)}},{key:"animate",value:function(){this.amountSlideForChange>=1?(this.changeNext(),this.amountSlideForChange-=1,this.pret=this.x):this.amountSlideForChange<=-1&&(this.changePrev(),this.amountSlideForChange+=1,this.pret=this.x),this.animates=requestAnimationFrame(this.animate.bind(this))}}]),n}(K);var Y=function(t){M()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=U()(t);if(e){var o=U()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return W()(this,n)}}(n);function n(t,a){var o;return k()(this,n),(o=e.call(this))._model=t,o._elements=a,o.wrapper=d()(a.wrapper),t.on("hideActiveSvg",(function(){o.hideActiveSvg()})),t.on("showActiveSvg",(function(){o.showActiveSvg()})),t.on("showSelectedFlats",(function(t){o.showSelectedFlats(t)})),t.on("showSelectedFloors",(function(t){o.showSelectedFloors(t)})),t.on("showSelectPolygon",(function(t){o.showSelectPolygon(t)})),t.on("filteredPolygonRemoveClass",(function(){o.filteredPolygonRemoveClass()})),t.on("changeSvgActive",(function(t){o.updateSvgActive(t)})),t.on("changeFlatActive",(function(t){o.updateFlatActive(t)})),t.on("removeSvgActivePolygons",(function(){o.removeSvgActivePolygons()})),t.on("updateLoaderProgress",(function(t){o.updatePreloaderPercent(t)})),t.on("progressBarHide",(function(){o.progressBarHide()})),t.on("createBackground",(function(){o.createBackground()})),t.on("createArrow",(function(){o.createArrow()})),t.on("changeContainerCursor",(function(t){o.changeContainerCursor(t)})),o.wrapper.on("mousedown",(function(t){o.emit("mouseKeyDown",t)})),o.wrapper.on("mousemove",a.wrapperEvent,(function(t){o.emit("mouseMove",t)})),o.wrapper.on("mouseup mouseleave",(function(t){o.emit("mouseKeyUp",t)})),o.wrapper.on("click touch","polygon",(function(t){o.emit("touchPolygon",t)})),window.addEventListener("keydown",(function(t){o.emit("keyPress",t)})),o}return x()(n,[{key:"changeContainerCursor",value:function(t){t&&(document.querySelector(".js-s3d__svg-container__".concat(this._model.type)).style.cursor=t)}},{key:"hideActiveSvg",value:function(){this._model.getSvgActive().css({opacity:0})}},{key:"showActiveSvg",value:function(){this._model.getSvgActive().css({opacity:1})}},{key:"showSelectPolygon",value:function(t){d()(".js-s3d__svgWrap .polygon__selected").removeClass("polygon__selected"),t.classList.add("polygon__selected")}},{key:"updateSvgActive",value:function(t){this._model.wrapper.find(".s3d__svg__active").removeClass("s3d__svg__active"),t.addClass("s3d__svg__active")}},{key:"updateFlatActive",value:function(t){var e=t.id,n=t.build,a=t.floor;this.removeSvgActivePolygons(),e?d()(".js-s3d__svgWrap [data-id=".concat(e,"]")).addClass("polygon__flat-svg"):d()(".js-s3d__svgWrap [data-build=".concat(n,"][data-floor=").concat(a,"]")).addClass("polygon__flat-svg")}},{key:"filteredPolygonRemoveClass",value:function(){}},{key:"showSelectedFlats",value:function(t){document.querySelectorAll('#js-s3d__wrapper polygon[data-type="flat"][data-id]').forEach((function(t){t.style.pointerEvents="none",t.classList.remove("polygon__filter-select")})),t.forEach((function(t){document.querySelectorAll('#js-s3d__wrapper polygon[data-id="'.concat(t,'"]')).forEach((function(t){t.style.pointerEvents="",t.classList.add("polygon__filter-select")}))}))}},{key:"showSelectedFloors",value:function(t){document.querySelectorAll('#js-s3d__wrapper polygon[data-type="floor"][data-id]').forEach((function(t){t.classList.remove("polygon__filter-select")})),t.forEach((function(t){var e=t.build,n=t.section,a=t.floor;document.querySelectorAll('#js-s3d__wrapper polygon[data-type="floor"][data-build="'.concat(e,'"][data-section="').concat(n,'"][data-floor="').concat(a,'"]')).forEach((function(t){return t.classList.add("polygon__filter-select")}))}))}},{key:"removeSvgActivePolygons",value:function(){d()(".js-s3d__svgWrap .polygon__flat-svg").removeClass("polygon__flat-svg")}},{key:"updatePreloaderPercent",value:function(t){d()(".fs-preloader-amount").html(t)}},{key:"progressBarHide",value:function(){d()(".fs-preloader").removeClass("preloader-active")}},{key:"createArrow",value:function(){var t=this,e=createMarkup("button",{class:"s3d__button s3d__button-left js-s3d__button-left unselectable",content:'<svg width="8" height="15" viewBox="0 0 8 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 1L1 7.5L7.5 14"/></svg>'});e.dataset.type="prev";var n=createMarkup("button",{class:"s3d__button s3d__button-right js-s3d__button-right unselectable",content:'<svg width="8" height="15" viewBox="0 0 8 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.5 1L7 7.5L0.5 14"/></svg>'});n.dataset.type="next",this.wrapper.append(e),e.addEventListener("click",(function(e){return t._model.checkDirectionRotate(e.target.dataset.type)})),this.wrapper.append(n),n.addEventListener("click",(function(e){return t._model.checkDirectionRotate(e.target.dataset.type)}))}},{key:"createBackground",value:function(){var t=createMarkup("div",{class:"s3d__slider__bg s3d__slider__bg-top"}),e=createMarkup("div",{class:"s3d__slider__bg s3d__slider__bg-bottom"});this._model.wrapper.append(t),this._model.wrapper.append(e)}}]),n}(K),Q=function t(e,n){k()(this,t),this._model=e,this._view=n,g("mobile")?n.on("touchPolygon",(function(t){e.touchPolygonMobileHandler(t)})):(n.on("mouseKeyDown",(function(t){return e.sliderRotateStart(t)})),n.on("mouseMove",(function(t){return e.mouseMoveHandler(t)})),n.on("mouseKeyUp",(function(t){return e.sliderRotateEnd(t)})),n.on("touchPolygon",(function(t){e.touchPolygonHandler(t)}))),n.on("keyPress",(function(t){return e.keyPressHandler(t)}))},tt=function(t,e,n){var a="".concat(window.defaultModulePath,"/images/examples/no-image.png"),o=e.rooms,r=e.area,i=e.floor,s=e.type,l=(e.number,e.img_small),c=e.id,d=n.value.includes(c);return'<div class="s3d-card js-s3d-card" data-id="'.concat(c,'" data-key="id">\n      <button class="s3d__close js-s3d-card__close"></button>\n      <div class="s3d-card__image"><img src="').concat(l||a,'" data-key="src"></div>\n      <div class="s3d-card__title">\n          <span data-key="rooms">').concat(o,"</span>\n          ").concat(t.t("count--rooms"),' —\n          <span data-key="area">').concat(r,'</span>м<sup>2</sup>\n      </div>\n      <table class="s3d-card__table">\n         <tbody>\n            <tr class="s3d-card__row">\n              <td class="s3d-card__name">').concat(t.t("floor"),':</td>\n              <td class="s3d-card__value" data-key="floor">').concat(i,'</td>\n            </tr>\n            <tr class="s3d-card__row">\n              <td class="s3d-card__name">').concat(t.t("type"),':</td>\n              <td class="s3d-card__value" data-key="type">').concat(s,'</td>\n            </tr>\n         </tbody>\n      </table>\n      <div class="s3d-card__buttons">\n          <label aria-label="button" aria-role="button" data-id="').concat(c,'" data-key="id" class="s3d__favourite js-s3d-add__favourite">\n             <input type="checkbox" data-key="checked" ').concat(d?"checked":"",'/>\n             <svg><use xlink:href="#icon-favourites"></use></svg>\n          </label>\n          <button type="button" class="s3d-card__link js-s3d-card__link">\n            <span class="s3d-card__link-text">').concat(t.t("card--link"),'</span>\n            <div class="s3d-card__arrow">\n              <svg width="8" height="15" viewBox="0 0 8 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.5 1L7 7.5L0.5 14"/></svg>\n            </div>\n          </button>\n      </div>\n   </div>')},et=function(t,e,n,a){t.scrollTop>t.scrollHeight-1.5*t.offsetHeight&&n<=e.length&&a(e,t,function(t,e,n){var a=e.length,o=t.querySelector('[data-id="'.concat(e[0],'"]')),r=o.offsetWidth,i=o.offsetHeight,s=t.offsetHeight,l=t.offsetWidth,c=Math.ceil(1.5*(l/r+s/i));return t.scrollHeight-i-t.offsetHeight<t.scrollTop&&c<a?n+c<=a?c:a-n:c}(t,e,n))},nt=function(){function t(e,n){k()(this,t),this.getFlat=e.getFlat,this.wrap=".js-s3d-pl__list",this.wrapperNode=document.querySelector(".js-s3d-pl__list"),this.wrapperNotFoundFlat=document.querySelector(".js-s3d-pl__not-found"),this.activeFlat=e.activeFlat,this.currentFilteredFlatIds$=e.currentFilteredFlatIds$,this.defaultShowingFlats=e.currentFilteredFlatIds$.value,this.currentShowAmount=0,this.showFlatList=[],this.updateFsm=e.updateFsm,this.i18n=n,this.favouritesIds$=e.favouritesIds$,this.preloader=B,this.preloaderWithoutPercent=I()}return x()(t,[{key:"init",value:function(){var t=this;this.subscribeFilterFlat(),setTimeout((function(){t.preloader.hide(),t.preloaderWithoutPercent.hide()}),600),d()(".js-s3d-pl__list").on("click",".js-s3d-card",(function(e){if(!e.target.closest(".js-s3d-add__favourite")){var n=d()(e.currentTarget).data("id");t.activeFlat=n,t.updateFsm({type:"flat",id:n})}})),this.wrapperNode.addEventListener("scroll",(function(e){et(e.target,t.showFlatList,t.currentShowAmount,t.createListCard.bind(t))}))}},{key:"visibleAvailableContainer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.wrapperNotFoundFlat.style.display=t?"":"none"}},{key:"subscribeFilterFlat",value:function(){var t=this;this.currentFilteredFlatIds$.subscribe((function(e){if(t.wrapperNode.scrollTop=0,t.wrapperNode.textContent="",t.currentShowAmount=0,t.updateShowFlat(e),t.visibleAvailableContainer(!1),0===e.length){var n=t.selectRandomAvailableFlats(5);return t.visibleAvailableContainer(!0),t.createListCard(n,t.wrapperNode,1),void et(t.wrapperNode,n,t.currentShowAmount,t.createListCard.bind(t))}t.createListCard(e,t.wrapperNode,1),et(t.wrapperNode,e,t.currentShowAmount,t.createListCard.bind(t))}))}},{key:"updateShowFlat",value:function(t){this.showFlatList=t}},{key:"createListCard",value:function(t,e,n){var a=this;t.forEach((function(t,o){o>=a.currentShowAmount&&o<a.currentShowAmount+n&&e.insertAdjacentHTML("beforeend",tt(a.i18n,a.getFlat(t),a.favouritesIds$))})),this.currentShowAmount+=n}},{key:"selectRandomAvailableFlats",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,n=0;return this.defaultShowingFlats.filter((function(a){return!(1!==t.getFlat(a).sale||n>=e||(n+=1,0))}))}}]),t}(),at=(n(50),n(1));function ot(t){var e=t.querySelector("input:checked").closest("label"),n=e.offsetWidth;return{left:e.offsetLeft,width:n}}var rt=function(t,e){var n="string"==typeof t?document.querySelectorAll(t):t,a="string"==typeof e?document.querySelector(e):e;if(n&&a){var o=n[0].parentElement,r=ot(o),i=r.left,s=r.width;a.style="left: ".concat(i,"px;width: ").concat(s,"px;"),o.addEventListener("click",(function(t){var e=t.target.closest("label");!function(t,e,n){var a=t.offsetLeft,o=t.offsetWidth,r=e.offsetLeft,i=e.offsetWidth,s=a+o,l=r+i,c=s>l?s:l,d=a<r?a:r,u=new at.d;u.to(t,{left:d-0,width:c+0,duration:.3,ease:at.b.easeInOut}),u.to(t,{left:r-0,width:i+0,duration:.4,ease:at.b.easeInOut},">")}(a,e)})),window.addEventListener("resize",(function(){var e=ot(("string"==typeof t?document.querySelectorAll(t):t)[0].parentElement);a.style="left: ".concat(e.left,"px;width: ").concat(e.width,"px;")}))}},it=n(18),st=n.n(it),lt=function(t){var e,n=t.url,a=t.data,o=null!==(e=t.method)&&void 0!==e?e:"get",r=new URLSearchParams(a);return"get"===o?st.a[o](n):st.a[o](n,r.toString())},ct={terrace:{iconName:"peculiarity-terrace",textKey:"peculiarity.terrace"},repair:{iconName:"peculiarity-repair",textKey:"peculiarity.repair"}},dt=function(t,e){var n=Object.entries(e).filter((function(t,e){return e})).map((function(e){var n=o()(e,1)[0];if(!ct[n])return"";var a=ct[n],r=a.textKey,i=a.iconName;return'<div class="peculiarity" data-peculiarity-content='.concat(t.t(r),'>\n    <svg class="peculiarity__icon"><use xlink:href="#icon-').concat(i,'"></use></svg>\n  </div>')})).join("");return'<div class="peculiarities">'.concat(n,"</div>")};function ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(n),!0).forEach((function(e){P()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var pt=function(t,e,n,a,r){var i="".concat(window.defaultModulePath,"/images/examples/no-image.png");if(!a)return'<svg viewBox="0 0 600 600" xmlns="http://www.w3.org/2000/svg" class="s3d-floor__svg">\n      <image src='.concat(i," xlink:href=").concat(i,' x="0" y="0" height="100%" width="100%" ></image>\n    </svg>');var s=a[0],l=void 0===s?100:s,c=a[1],d=void 0===c?100:c,u=e?"".concat(defaultProjectPath,"/assets").concat(e):i,f=[["section","section"],["area","area"],["life-area","life_room"],["rooms","rooms"],["type","type"],["id","id"]],p={width:document.documentElement.offsetWidth,height:document.documentElement.offsetHeight},h=n.map((function(t){if(!t.sorts)return"";var e=function(t){var e=[];t.split(",").reduce((function(t,n,a){return a%2==0?{x:+n}:(e.push(ft(ft({},t),{},{y:+n})),{})}),{});var n=e.reduce((function(t,e){var n=e.x,a=e.y,o=ft({},t);return t?(n<o.left&&(o.left=n),a<o.top&&(o.top=a),n>o.right&&(o.right=n),a>o.bottom&&(o.bottom=a),o):{left:n,top:a,right:n,bottom:a}}),null);return{x:(n.right-n.left)/2+n.left,y:(n.bottom-n.top)/2+n.top}}(t.sorts),n=3===t.sale,a=n&&function(t,e,n,a){var o=t.x,r=t.y,i=e/a.width*100,s=n/a.height*100,l=r-s/2;return"<use x=".concat(o-i/2," y=").concat(l,' width="').concat(i,'" height="').concat(s,'" xlink:href="#closed"></use>')}(e,l,d,p),i=f.map((function(e){var n=o()(e,2),a=n[0],r=n[1];return"data-".concat(a,'="').concat(t[r],'"')})).join(" "),s="s3d-flat__polygon ".concat(n?"":"js-s3d-flat__polygon"," ").concat(r===t.id?"s3d-flat-active":"");return'<polygon class="'.concat(s,'" points=').concat(t.sorts," ").concat(i," data-sold=").concat(n," data-tippy-element ></polygon>\n      ").concat(a||"")})).join("");return'<svg viewBox="0 0 '.concat(l," ").concat(d,'" xmlns="http://www.w3.org/2000/svg" class="s3d-floor__svg">\n      <symbol id="closed" viewBox="0 0 30 30">\n          <path d="M30 15C30 6.71573 23.2843 0 15 0C6.71573 0 0 6.71573 0 15C0 23.2843 6.71573 30 15 30C23.2843 30 30 23.2843 30 15Z" fill="#A0A6AE"/>\n          <path d="M11.8877 13.5517H12.3562V12.1666C12.3562 10.7513 13.5421 9.59961 14.9996 9.59961C16.4578 9.59961 17.6434 10.7511 17.6434 12.1666V13.5517H18.1118C18.3813 13.5517 18.5997 13.7638 18.5997 14.0254V18.7259C18.5997 18.9875 18.3813 19.1996 18.1118 19.1996H11.8876C11.6187 19.1996 11.3997 18.9875 11.3997 18.7259V14.0254C11.3997 13.7638 11.6187 13.5517 11.8877 13.5517ZM16.6677 12.1666C16.6677 11.2734 15.9195 10.5471 14.9997 10.5471C14.08 10.5471 13.3319 11.2734 13.3319 12.1666V13.5517H16.6677V12.1666Z" fill="#2A3341"/>\n      </symbol>\n      <image src=').concat(u," xlink:href=").concat(u,' x="0" y="0" height="100%" width="100%" ></image>\n      ').concat(h,"\n    </svg>")};function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function vt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(n),!0).forEach((function(e){P()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _t=function(t){M()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=U()(t);if(e){var o=U()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return W()(this,n)}}(n);function n(t,a){var o;return k()(this,n),(o=e.call(this)).type=t.type,o.generalWrapId=t.generalWrapId,o.activeFlat=t.activeFlat,o.hoverData$=t.hoverData$,o.getFavourites=t.getFavourites,o.updateFavourites=t.updateFavourites,o.getFlat=t.getFlat,o.updateFsm=t.updateFsm,o.floorList$=t.floorList$,o.i18n=a,o.history=t.history,o.favouritesIds$=t.favouritesIds$,o.createWrap(),o.wrapper=document.querySelector(".js-s3d__wrapper__".concat(o.type)),o.imagesType="",o.imagesViewType="",o.configProject=o.createConfigProject(),o}return x()(n,[{key:"createConfigProject",value:function(){var t=this.getFlat(this.activeFlat);return{build:t.build,section:t.section,floor:t.floor}}},{key:"init",value:function(t){this.preloader=B}},{key:"createWrap",value:function(){var t=createMarkup("div",{class:"s3d__wrap js-s3d__wrapper__".concat(this.type," s3d__wrapper__").concat(this.type)});d()(this.generalWrapId).append(t)}},{key:"update",value:function(){var t=i()(l.a.mark((function t(e){var n=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.activeFlat=e,this.setPlaneInPage(this.activeFlat),this.configProject=this.createConfigProject(),t.next=5,this.updateFloor();case 5:setTimeout((function(){var t=document.querySelector('.js-s3d__select[data-type="flat"]');n.preloader.turnOff(t),n.preloader.hide()}),600);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"updateFloor",value:function(){var t=i()(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getFloor(this.configProject);case 2:e=t.sent,this.setFloorInPage(e.data),this.emit("updateActiveFlatInFloor",this.activeFlat);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"preparationFlats",value:function(t){var e=this;return t.map((function(t){return e.getFlat(t)}))}},{key:"setPlaneInPage",value:function(t){var e=this.getFlat(+t),n=function(t,e,n){var a=function(t,e){return' <div class="s3d-flat__info">\n    <p class="s3d-info__title">'.concat(e.rooms,"-").concat(t.t("count--rooms"),'</p>\n    <table class="s3d-info__table">\n      <tbody>\n        <tr class="s3d-info__row">\n          <th class="s3d-info__name">').concat(t.t("build"),':</th>\n          <th class="s3d-info__value">').concat(e.build_name?e.build_name:e.build,'</th>\n        </tr>\n        <tr class="s3d-info__row">\n          <th class="s3d-info__name">').concat(t.t("section"),':</th>\n          <th class="s3d-info__value">').concat(e.section,'</th>\n        </tr>\n        <tr class="s3d-info__row">\n          <th class="s3d-info__name">').concat(t.t("floor"),':</th>\n          <th class="s3d-info__value">').concat(e.floor,'</th>\n        </tr>\n        <tr class="s3d-info__row">\n          <th class="s3d-info__name">').concat(t.t("allArea"),':</th>\n          <th class="s3d-info__value">').concat(e.area,' m<sup>2</sup></th>\n        </tr>\n        <tr class="s3d-info__row">\n          <th class="s3d-info__name">').concat(t.t("type"),':</th>\n          <th class="s3d-info__value">').concat(e.type,"</th>\n        </tr>\n      </tbody>\n    </table>\n  </div>")}(t,e),o=dt(t,e.option),r=n.value.includes(e.id)?"checked":"",i=e["3d_tour"]?function(t,e){return'<a data-href="'.concat(e,'" href="#" class="s3d-flat__3d-tour js-s3d-flat__3d-tour">\n      <div class="s3d-flat__3d-tour__icon">\n        <svg class="icon--3d" role="presentation">\n          <use xlink:href="#icon-3d"></use>\n        </svg>\n      </div>\n      <span class="s3d-flat__3d-tour__text">').concat(t.t("3dTour"),"</span>\n    </a>")}(t,e["3d_tour"]):"";return'\n  <div class="s3d-flat js-s3d-flat">\n    <div class="s3d-flat__info-container">\n      '.concat(a,"\n      ").concat(o,'\n    </div>\n    <button class="s3d-show-in-3d" id="js-s3d__show-3d">\n      <div class="s3d-show-in-3d__icon">\n        <svg class="icon--3d" role="presentation">\n          <use xlink:href="#icon-3d"></use>\n        </svg>\n      </div>\n      <span class="s3d-show-in-3d__text">').concat(t.t("showIn3d"),'</span>\n    </button>\n    <label data-id="').concat(e.id,'" data-key="id" class="s3d__favourite js-s3d-add__favourite">\n       <input type="checkbox" ').concat(r,' />\n       <svg><use xlink:href="#icon-favourites"></use></svg>\n    </label>\n    ').concat(i,'\n    <div class="s3d-flat__border-horizontal"></div>\n    <div class="s3d-flat__border-vertical"></div>\n    <div class="s3d-flat__bg"></div>\n    <div class="s3d-flat__image-container">\n      <div class="s3d-flat__image">\n        <img class="js-s3d-flat__image" src="" data-mfp-src="">\n      </div>\n      <div class="s3d-flat__buttons-wrap">\n        <div class="s3d-flat__buttons-view js-s3d-flat__buttons-view">\n          <label data-type="2d" class="s3d-flat__radio js-s3d__radio-view" >\n            <input type="radio" name="view" value="2d">\n            <span>').concat(t.t("Flat.2d"),'</span>\n          </label>\n          <label class="s3d-flat__select js-s3d__radio-view-change">\n            <input type="checkbox">\n            <i class="s3d-flat__select-circle"></i>\n          </label>\n          <label data-type="3d" class="s3d-flat__radio js-s3d__radio-view">\n            <input type="radio" name="view" value="3d">\n            <span>').concat(t.t("Flat.3d"),'</span>\n          </label>\n         </div>\n        <div class="s3d-flat__buttons js-s3d-flat__buttons-type"></div>\n      </div>\n    </div>\n    <button class="s3d__callback js-popup-open" data-popup-type="callback">\n      <div class="s3d__callback-icon">\n        <svg role="presentation">\n          <use xlink:href="#icon-callback"></use>\n        </svg>\n      </div>\n      <span>\n        ').concat(t.t("callback--1"),'\n      </span>\n    </button>\n    <a href="#" class="s3d-flat__pdf js-s3d__create-pdf">').concat(t.t("pdf"),'</a>\n    <div class="s3d-flat__floor">\n      <div class="s3d__compass">\n        <svg class="icon--Compass" role="presentation">\n          <use xlink:href="#icon-Compass"></use>\n        </svg>\n      </div>\n\n      <article class="s3d-floor__nav">\n      <p class="s3d-floor__nav-title">').concat(t.t("floor"),'</p>\n      <button data-floor_btn data-floor_direction="prev" >\n         <svg class="s3d-floor__nav-prev"><use xlink:href="#icon-arrow"></use></svg>\n      </button>\n      <p data-current-floor="').concat(e.floor,'">').concat(e.floor,'</p>\n      <button data-floor_btn data-floor_direction="next">\n         <svg class="s3d-floor__nav-next"><use xlink:href="#icon-arrow"></use></svg>\n       </button>\n    </article>\n      <button class="s3d-flat__to--floor" id="s3d-to-floor">\n        <span>').concat(t.t("Flat.goToFloor"),'</span>\n        <div class="s3d-flat__to--floor-icon">\n          <svg width="48" height="11" viewBox="0 0 48 11" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M41.5 0.5L46.5 5.5M46.5 5.5L41.5 10.5M46.5 5.5H0.5"/>\n          </svg>\n        </div>\n      </button>\n    </div>\n  </div>\n')}(this.i18n,e,this.favouritesIds$);this.emit("setFlat",n),this.checkPlaning(),d()(".js-s3d-flat__image").magnificPopup({type:"image",showCloseBtn:!0}),rt(".s3d-flat__button",".js-s3d__btn-tab-svg")}},{key:"radioTypeHandler",value:function(t){var e=this.getFlat(this.activeFlat).images[t];this.imagesType=t,this.emit("changeClassShow",{element:".js-s3d-flat__buttons-view",flag:!1});var n=Object.keys(e);n.length>1&&this.emit("changeClassShow",{element:".js-s3d-flat__buttons-view",flag:!0}),document.querySelector('.js-s3d__radio-view[data-type="'.concat(n[0],'"]')).querySelector("input").checked=!0,this.radioViewHandler(n[0])}},{key:"toFloorPlan",value:function(){var t=this.getFlat(this.activeFlat),e=t.build,n=t.floor,a=t.section;this.updateFsm({type:"floor",build:e,floor:n,section:a})}},{key:"look3d",value:function(){this.updateFsm({type:"flyby",id:this.activeFlat})}},{key:"checkPlaning",value:function(){this.emit("changeClassShow",{element:".js-s3d-flat__buttons-view.show",flag:!1});var t=this.getFlat(this.activeFlat),e=Object(z.size)(t.images);if(0!==e){var n=Object.keys(t.images);if(this.imagesType=n[0],this.imagesViewType=Object.keys(t.images[n[0]])[0],this.emit("clearRadioElement",".js-s3d-flat__buttons-type"),e>1){for(var a in this.emit("createRadioSvg",".js-s3d-flat__buttons-type"),t.images)this.emit("createRadioElement",{wrap:".js-s3d-flat__buttons-type",type:a,name:"type"});document.querySelector(".js-s3d__radio-type[data-type=".concat(this.imagesType,"] input")).checked=!0}this.radioTypeHandler(this.imagesType)}else this.emit("updateImg","/s3d/images/examples/no-image.png")}},{key:"radioViewHandler",value:function(t){this.imagesViewType=t;var e=this.getFlat(this.activeFlat).images[this.imagesType][t],n=document.querySelector(".js-s3d__radio-view-change input");document.querySelector('.js-s3d__radio-view[data-type="'.concat(t,'"] input')).checked=!0,n.checked="2d"!==t,this.emit("updateImg",e)}},{key:"radioCheckedHandler",value:function(t){t?document.querySelector('.js-s3d__radio-view[data-type="3d"]').click():document.querySelector('.js-s3d__radio-view[data-type="2d"]').click()}},{key:"getFloor",value:function(t){if("local"===status){var e={data:{url:"/wp-content/themes/template/assets/s3d/images/examples/floor.png",flatsIds:[30,31,32,33,34,35,36,37]}};return new Promise((function(t,n){t(e)}))}var n=vt({action:"getFloor"},t);return lt({url:"/wp-admin/admin-ajax.php",method:"post",data:n})}},{key:"setFloorInPage",value:function(t){var e=t.url,n=t.flatsIds,a=t.size,o=this.preparationFlats(n),r=pt(this.i18n,e,o,a,this.activeFlat);this.emit("removeFloorSvg"),this.emit("setFloor",r),this.emit("updateFlatIdChoose",this.activeFlat),this.checkChangeFloor()}},{key:"checkChangeFloor",value:function(){var t,e,n=this.configProject,a=n.build,o=n.section,r=n.floor,i=this.floorList$.value.filter((function(t){return t.build===a&&t.section===o})).map((function(t){return window.parseInt(t.floor)})),s=i.indexOf(r),l={prev:null!==(t=i[s-1])&&void 0!==t?t:null,next:null!==(e=i[s+1])&&void 0!==e?e:null};0===s&&(l.prev=null),s===i.length-1&&(l.next=null),this.changeFloorData=l,this.emit("renderCurrentFloor",this.configProject),this.emit("renderFloorChangeButtons",this.changeFloorData)}},{key:"changeFloorHandler",value:function(t){var e=this.changeFloorData[t];e&&(this.configProject=vt(vt({},this.configProject),{},{floor:e}),this.updateFloor())}},{key:"getPdfLink",value:function(){lt({url:"/wp-admin/admin-ajax.php",method:"post",data:{action:"createPdf",id:this.activeFlat}}).then((function(t){return t.data})).then((function(t){var e=document.querySelector(".initClickPdf");e&&e.remove(),document.body.insertAdjacentHTML("beforebegin",'<a class="initClickPdf" target="_blank" href="'.concat(t,'"></a>')),document.querySelector(".initClickPdf").click()}))}}]),n}(K),mt=function t(e,n){var a=this;k()(this,t),this._model=e,this._view=n,n.on("changeFloorHandler",(function(t){var e=t.getAttribute("data-floor_direction");a._model.changeFloorHandler(e)})),n.on("clickFlatHandler",(function(t){var e=parseInt(t.getAttribute("data-id"));e&&(a._model.history.update({type:"flat",id:e}),a._model.update(e))})),n.on("toFloorPlan",(function(){a._model.toFloorPlan()})),n.on("look3d",(function(){a._model.look3d()})),n.on("changeRadioType",(function(t){var e=t.getAttribute("data-type");e&&a._model.radioTypeHandler(e)})),n.on("changeRadioView",(function(t){var e=t.getAttribute("data-type");e&&a._model.radioViewHandler(e)})),n.on("changeRadioChecked",(function(t){a._model.radioCheckedHandler(t.control.checked)})),n.on("clickPdfHandler",(function(t){a._model.getPdfLink()}))},yt=n(20);var gt=function(t){M()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=U()(t);if(e){var o=U()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return W()(this,n)}}(n);function n(t){var a;return k()(this,n),(a=e.call(this)).href=t,a.containerClassName="vr-popup",a}return x()(n,[{key:"render",value:function(){var t=this,e='\n      <div class="'.concat(this.containerClassName,'">\n        <div class="').concat(this.containerClassName,'__content">\n          <iframe src="').concat(this.href,'"></iframe>\n        </div>\n        <svg class="vr-popup__close" width="60" height="60" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <circle cx="30" cy="30" r="30" fill="white"/>\n          <path d="M37.826 37.826L22.1738 22.1738M22.1738 37.826L37.826 22.1738L22.1738 37.826Z" stroke="#555568"/>\n        </svg>\n      </div>\n    ');document.body.insertAdjacentHTML("beforeend",e),document.querySelector(".".concat(this.containerClassName," .").concat(this.containerClassName,"__close")).addEventListener("click",(function(){document.querySelector(".".concat(t.containerClassName)).remove()}))}}]),n}(K);var bt=function(t){M()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=U()(t);if(e){var o=U()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return W()(this,n)}}(n);function n(t,a,r){var i;return k()(this,n),(i=e.call(this))._model=t,i._elements=a,i.i18n=r,i.mappingClickEvents={polygon:function(t){return i.emit("clickFlatHandler",t)},floorBtn:function(t){return i.emit("changeFloorHandler",t)},toFloorBtn:function(t){return i.emit("toFloorPlan",t)},pdf:function(t){return i.emit("clickPdfHandler",t)},show3d:function(t){return i.emit("look3d",t)},radioView:function(t){"input"===t.localName&&i.emit("changeRadioChecked",t)}},t.wrapper.addEventListener("click",(function(t){var e={polygon:L(".js-s3d-flat__polygon",t),floorBtn:L("[data-floor_btn]",t),toFloorBtn:L("#s3d-to-floor",t),pdf:L(".js-s3d__create-pdf",t),show3d:L("#js-s3d__show-3d",t),radioView:L(".js-s3d__radio-view-change",t)};Object.entries(e).map((function(t){var e=o()(t,2),n=e[0],a=e[1];return _.isObject(a)&&i.mappingClickEvents[n](a)}))})),t.wrapper.addEventListener("click",(function(t){var e=L(".js-s3d-flat__3d-tour",t);_.isObject(e)&&new gt(e.dataset.href).render()})),t.wrapper.addEventListener("click",(function(t){var e=L(".js-s3d__radio-type",t);_.isObject(e)&&i.emit("changeRadioType",e)})),t.wrapper.addEventListener("click",(function(t){var e=L(".js-s3d__radio-view",t);_.isObject(e)&&i.emit("changeRadioView",e)})),t.on("setFlat",(function(t){i.setFlat(t)})),t.on("setFloor",(function(t){i.setFloor(t)})),t.on("removeFloorSvg",(function(){i.removeFloorSvg()})),t.on("removeElement",(function(t){i.removeElement(t)})),t.on("changeClassShow",(function(t){i.changeClassShow(t)})),t.on("updateImg",(function(t){i.setNewImage(t)})),t.on("createRadioElement",(function(t){i.createRadio(t)})),t.on("createRadioSvg",(function(t){i.createRadioSvg(t)})),t.on("clearRadioElement",(function(t){i.clearRadio(t)})),t.on("updateDataFlats",(function(t){i.updateHoverFlats(t)})),t.on("updateActiveFlatInFloor",(function(t){i.updateActiveFlatInFloor(t)})),t.on("updateFlatIdChoose",(function(t){i.updateFlatIdChoose(t)})),t.on("renderFloorChangeButtons",(function(t){i.renderFloorChangeButtons(t)})),t.on("renderCurrentFloor",(function(t){i.renderCurrentFloor(t)})),i}return x()(n,[{key:"setFlat",value:function(t){this._model.wrapper.innerHTML=t;var e=this._model.wrapper.querySelectorAll("[data-peculiarity-content]");0!==e.length&&Object(yt.a)(e,{arrow:!1,trigger:"mouseenter click",placement:"bottom",content:function(t){var e=document.createElement("div");return e.classList="peculiarity__desc",e.innerHTML="".concat(t.dataset.peculiarityContent),e}})}},{key:"renderCurrentFloor",value:function(t){var e=t.floor,n=document.querySelector("[data-current-floor]");n.setAttribute("data-value",e),n.innerHTML=e}},{key:"renderFloorChangeButtons",value:function(t){document.querySelector('[data-floor_direction="prev"]').disabled=!t.prev,document.querySelector('[data-floor_direction="next"]').disabled=!t.next}},{key:"updateActiveFlatInFloor",value:function(t){var e=document.querySelector(".js-s3d-flat__polygon.polygon__active-flat");e&&e.classList.remove("polygon__active-flat");var n=document.querySelector('.js-s3d-flat__polygon[data-id="'.concat(t,'"]'));n&&n.classList.add("polygon__active-flat")}},{key:"updateFlatIdChoose",value:function(t){t&&document.querySelector('.s3d-nav__btn[data-type="flat"]').setAttribute("data-id",t)}},{key:"setFloor",value:function(t){var e=this;document.querySelector(".s3d-flat__floor").insertAdjacentHTML("afterbegin",t),Object(yt.a)("[data-tippy-element]",{arrow:!1,trigger:"mouseenter",placement:"bottom",content:function(t){var n=document.createElement("div");return n.classList="s3d-floor__miniInfo",n.innerHTML='<div class="s3d-floor__miniInfo-val">'.concat(t.dataset.type,'</div>\n<div class="s3d-floor__miniInfo-val">').concat(e.i18n.t("Floor.miniInfo.rooms")).concat(t.dataset.rooms,'</div>\n<div class="s3d-floor__miniInfo-val">').concat(e.i18n.t("Floor.miniInfo.area")).concat(t.dataset.area,"</div>"),n}})}},{key:"changeClassShow",value:function(t){var e=t.element,n=t.flag,a=document.querySelector(e);if(_.isObjectLike(a)){var o=n?"add":"remove";a.classList[o]("show")}}},{key:"removeFloorSvg",value:function(){this.removeElement(".s3d-floor__svg")}},{key:"removeElement",value:function(t){var e=document.querySelector(t);e&&e.remove()}},{key:"createRadio",value:function(t){var e=t.wrap,n=t.type,a=t.name;document.querySelector(e).insertAdjacentHTML("beforeend",'<label class="s3d-flat__button js-s3d__radio-'.concat(a,'" data-type=').concat(n,' >\n      <input type="radio" name=').concat(a,' class="s3d-flat__button-input" value=').concat(n," />\n    <span>").concat(this.i18n.t("Flat.buttons.".concat(n)),"</span></label>"))}},{key:"createRadioSvg",value:function(t){document.querySelector(t).insertAdjacentHTML("beforeend",'<div class="s3d-flat__buttons-bg js-s3d__btn-tab-svg"><svg viewBox="0 0 145 44" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">\n          <path d="M0 22C0 9.84974 9.84973 0 22 0H123C135.15 0 145 9.84974 145 22C145 34.1503 135.15 44 123 44H22C9.84974 44 0 34.1503 0 22Z"/>\n        </svg></div>')}},{key:"clearRadio",value:function(t){document.querySelector(t).innerHTML=""}},{key:"setNewImage",value:function(t){var e=document.querySelector(".js-s3d-flat__image"),n="".concat(defaultProjectPath,"/assets").concat(t);e.setAttribute("src",n),e.setAttribute("data-mfp-src",n)}},{key:"updateHoverFlats",value:function(t){document.querySelector('.js-s3d__wrapper__flat [data-type="type"]').innerHTML=t.type,document.querySelector('.js-s3d__wrapper__flat [data-type="flat"]').innerHTML=t.rooms,document.querySelector('.js-s3d__wrapper__flat [data-type="area"]').innerHTML=t.area}}]),n}(K),wt=function(t,e){var n=function(t,e){return[["build","build"],["section","section"],["floor","floor"],["count","floor__all--flats"],["free","floor__free--flats"]].map((function(n){var a=o()(n,2),r=a[0],i=a[1];return'<tr class="s3d-info__row">\n    <th class="s3d-info__name">'.concat(t.t(i),':</th>\n    <th class="s3d-info__value">').concat(e[r],"</th>\n  </tr>")})).join("")}(t,e);return'\n  <div class="s3d-floor js-s3d-floor">\n    <div class="s3d-floor__info">\n      <div class="s3d-flat__info">\n        <p class="s3d-info__title">'.concat(e.floor," ").concat(t.t("floor"),'</p>\n        <table class="s3d-info__table">\n          <tbody>\n            ').concat(n,'\n          </tbody>\n        </table>\n      </div>\n    </div>\n\n    <article class="s3d-floor__nav">\n      <button data-floor_btn data-floor_direction="prev" >\n         <svg class="s3d-floor__nav-prev"><use xlink:href="#icon-arrow"></use></svg>\n      </button>\n      <p data-current-floor=').concat(e.floor,">").concat(e.floor,'</p>\n      <button data-floor_btn data-floor_direction="next">\n         <svg class="s3d-floor__nav-next"><use xlink:href="#icon-arrow"></use></svg>\n       </button>\n    </article>\n    <div class="s3d-floor__border-horizontal"></div>\n    <div class="s3d-floor__border-vertical"></div>\n    <div class="s3d-floor__bg"></div>\n    <button class="s3d__callback js-popup-open" data-popup-type="callback">\n      <div class="s3d__callback-icon">\n        <svg role="presentation">\n          <use xlink:href="#icon-callback"></use>\n        </svg>\n      </div>\n      <span class="s3d__callback-text">\n        ').concat(t.t("callback--1"),'\n      </span>\n    </button>\n    <div class="s3d-floor__flat" id="s3d-data-flat">\n      <div class="s3d-flat__info">\n        <p class="s3d-info__title" data-update="rooms" data-default-text="–">-</p>\n        <table class="s3d-info__table">\n          <tbody>\n            <tr class="s3d-info__row">\n              <th class="s3d-info__name">').concat(t.t("allArea"),':</th>\n              <th class="s3d-info__value" data-update="area" data-default-text="–">-</th>\n            </tr>\n            <tr class="s3d-info__row">\n              <th class="s3d-info__name">').concat(t.t("type"),':</th>\n              <th class="s3d-info__value" data-update="type" data-default-text="–">-</th>\n            </tr>\n            <tr class="s3d-info__row">\n              <th class="s3d-info__name">').concat(t.t("apartment--number"),':</th>\n              <th class="s3d-info__value" data-update="number" data-default-text="–">-</th>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="s3d__compass">\n        <svg class="icon--Compass" role="presentation">\n          <use xlink:href="#icon-Compass"></use>\n        </svg>\n      </div>\n    </div>\n  </div>\n')};function Ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ft(Object(n),!0).forEach((function(e){P()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var jt=function(t){M()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=U()(t);if(e){var o=U()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return W()(this,n)}}(n);function n(t,a){var o;return k()(this,n),(o=e.call(this)).type=t.type,o.getFlat=t.getFlat,o.generalWrapId=t.generalWrapId,o.createWrap(),o.wrapper=document.querySelector(".js-s3d__wrapper__".concat(o.type)),o.history=t.history,o.updateFsm=t.updateFsm,o.configProject=t.settings,o.preloader=B,o.preloaderWithoutPercent=I(),o.floorList$=t.floorList$,o.i18n=a,o.changeFloorData={prev:t.settings.floor,next:t.settings.floor},o}return x()(n,[{key:"init",value:function(){this.update()}},{key:"update",value:function(){var t=i()(l.a.mark((function t(e){var n,a=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.configProject=null!=e?e:this.configProject,t.next=3,this.getFloor(this.configProject).then((function(t){var e=t.data;if(!e)throw new Error("Error getting floor");return e})).catch((function(t){throw new Error("Error getting floor")}));case 3:n=t.sent,this.setPlaneInPage(n),setTimeout((function(){a.preloader.turnOff(document.querySelector('.js-s3d__select[data-type="floor"]')),a.preloader.hide(),a.preloaderWithoutPercent.hide()}),600);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"createWrap",value:function(){var t=createMarkup("div",{class:"s3d__wrap js-s3d__wrapper__".concat(this.type)});document.querySelector(this.generalWrapId).insertAdjacentElement("beforeend",t)}},{key:"selectFlat",value:function(t){this.updateFsm({type:"flat",id:t})}},{key:"checkChangeFloor",value:function(){var t=this.configProject,e=t.build,n=t.section,a=t.floor,o=this.floorList$.value.filter((function(t){return t.build===e&&t.section===n})).map((function(t){return window.parseInt(t.floor)})),r=o.indexOf(a),i={prev:o[r-1],next:o[r+1]};0===r&&(i.prev=null),r===o.length-1&&(i.next=null),this.changeFloorData=i,this.emit("renderCurrentFloor",this.configProject),this.emit("renderFloorChangeButtons",this.changeFloorData)}},{key:"changeFloorHandler",value:function(t){var e=this.changeFloorData[t];this.configProject=kt(kt({},this.configProject),{},{floor:e}),this.update()}},{key:"preparationFlats",value:function(t){var e=this;return t.map((function(t){return e.getFlat(t)}))}},{key:"preparationFloor",value:function(){var t=this.floorList$.value,e=this.configProject,n=e.floor,a=e.build,o=e.section;return Object(z.find)(t,{floor:n,build:a,section:o})}},{key:"setPlaneInPage",value:function(t){var e=t.url,n=t.flatsIds,a=t.size,o=this.preparationFlats(n),r=this.preparationFloor(),i=wt(this.i18n,r),s=pt(this.i18n,e,o,a);this.emit("setFloor",i),this.emit("removeFloorSvg"),this.emit("setFloorSvg",s),this.checkChangeFloor()}},{key:"getFloor",value:function(t){if("local"===status){var e={url:"/wp-content/themes/template/assets/s3d/images/examples/floor.png",flatsIds:[30,31,32,33,34,35,36,37]};return new Promise((function(t,n){t(e)}))}var n=kt({action:"getFloor"},t);return lt({url:"/wp-admin/admin-ajax.php",method:"post",data:n})}},{key:"updateHoverDataFlat",value:function(t){if(t&&t.hasAttribute("data-id")){var e=t.getAttribute("data-id"),n=Object(z.pick)(this.getFlat(+e),["area","number","type","rooms"]);this.emit("updateDataFlats",kt(kt({},n),{},{lang:this.i18n}))}else this.emit("clearDataFlats",{})}}]),n}(K);function xt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}var St=function t(e,n){var a=this;k()(this,t),this._model=e,this._view=n,n.on("changeFloorHandler",(function(t){var e=t.getAttribute("data-floor_direction");a._model.changeFloorHandler(e),a._model.history.update(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(n),!0).forEach((function(e){P()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({type:"floor"},a._model.configProject))})),n.on("clickFloorHandler",(function(t){var e=t.getAttribute("data-id"),n="true"===t.getAttribute("data-sold");e&&!n&&a._model.selectFlat(e)})),n.on("updateHoverDataFlat",(function(t){a._model.updateHoverDataFlat(t)}))};var Pt=function(t){M()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=U()(t);if(e){var o=U()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return W()(this,n)}}(n);function n(t,a){var o;return k()(this,n),(o=e.call(this))._model=t,o._elements=a,t.wrapper.addEventListener("click",(function(t){t.preventDefault();var e=L(".s3d-flat__polygon",t),n=L("[data-floor_btn]",t);switch(!0){case _.isObject(e):o.emit("clickFloorHandler",e);break;case _.isObject(n):o.emit("changeFloorHandler",n)}})),t.wrapper.addEventListener("mouseout",(function(t){L(".s3d-flat__polygon",t)&&o.emit("updateHoverDataFlat")})),t.wrapper.addEventListener("mouseover",(function(t){var e=L(".s3d-flat__polygon",t);"false"!==(null==e?void 0:e.dataset.sold)||o.emit("updateHoverDataFlat",e)})),t.on("setFloor",(function(t){o.setFloor(t)})),t.on("setFloorSvg",(function(t){o.setFloorSvg(t)})),t.on("removeFloorSvg",(function(){o.removeFloorSvg()})),t.on("removeElement",(function(t){o.removeElement(t)})),t.on("changeClassShow",(function(t){o.changeClassShow(t)})),t.on("updateImg",(function(t){o.setNewImage(t)})),t.on("clearDataFlats",(function(){o.clearHoverFlats()})),t.on("updateDataFlats",(function(t,e){o.updateHoverFlats(t,e)})),t.on("renderFloorChangeButtons",(function(t){o.renderFloorChangeButtons(t)})),t.on("renderCurrentFloor",(function(t){o.renderCurrentFloor(t)})),o}return x()(n,[{key:"setFloor",value:function(t){this._model.wrapper.innerHTML=t}},{key:"setFloorSvg",value:function(t){document.querySelector(".js-s3d-floor").insertAdjacentHTML("afterbegin",t)}},{key:"removeFloorSvg",value:function(){this.removeElement(".s3d-floor__svg")}},{key:"removeElement",value:function(t){var e=document.querySelector(t);e&&e.remove()}},{key:"renderCurrentFloor",value:function(t){var e=t.floor,n=document.querySelector("[data-current-floor]");n.setAttribute("data-value",e),n.innerHTML=e}},{key:"renderFloorChangeButtons",value:function(t){document.querySelector('[data-floor_direction="prev"]').disabled=!t.prev,document.querySelector('[data-floor_direction="next"]').disabled=!t.next}},{key:"setNewImage",value:function(t){var e=document.querySelector(".js-s3d-flat__image");e.setAttribute("src",defaultProjectPath+t),e.setAttribute("data-mfpSrc",defaultProjectPath+t)}},{key:"updateHoverFlats",value:function(t,e){var n=Object.entries(t),a=document.getElementById("s3d-data-flat");n.forEach((function(e){var n=o()(e,2),r=n[0],i=n[1],s=a.querySelector('[data-update="'.concat(r,'"]'));if(s)switch(r){case"rooms":s.innerHTML="".concat(i,"-").concat(t.lang.t("count--rooms"));break;case"type":s.innerHTML="".concat(i,"к");break;default:s.innerHTML=i}}))}},{key:"clearHoverFlats",value:function(){var t=document.getElementById("s3d-data-flat").querySelectorAll("[data-update]");0!=t.length&&t.forEach((function(t){var e=t.dataset.defaultText||"-";t.innerHTML=e}))}}]),n}(K);function Ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}var Ot=function(){function t(e){k()(this,t),this.history=[],this.updateFsm=e.updateFsm,this.update=this.update.bind(this),this.replaceUrl=this.replaceUrl.bind(this),this.stepBack=this.stepBack.bind(this),this.init()}return x()(t,[{key:"init",value:function(){var t=this;window.onpopstate=function(e){return t.stepBack(e.state),!0}}},{key:"stepBack",value:function(t){var e=null!=t?t:this.history;this.updateFsm(e,!1)}},{key:"update",value:function(t){window.history.pushState(t,"3dModule",this.createUrl(t)),this.history=t}},{key:"replaceUrl",value:function(t){window.history.replaceState(t,"3dModule",this.createUrl(t))}},{key:"createUrl",value:function(t){var e=Object.entries(t).reduce((function(t,e){var n=o()(e,2),a=n[0],r=n[1];return"".concat(t,"&").concat(a,"=").concat(r)}),"");return"?".concat(encodeURIComponent(e))}}]),t}(),Bt=n(19),It=n.n(Bt),At=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;k()(this,t),this.currentWindow=0,this.countSlides=n,this.i18n=e,this.easing=new It.a(0,1,1,0),this.animation=at.y.timeline({duration:.4,ease:this.easing})}return x()(t,[{key:"init",value:function(){var t=i()(l.a.mark((function t(){var e,n=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(document.querySelector("body").insertAdjacentHTML("afterend",'\n  <div class="s3d__helper-gif__wrap js-s3d__helper-gif-wrap">\n    <div class="s3d__helper-gif js-s3d__helper-gif" data-step="0">\n        <div class="s3d__helper-gif__gif" data-type="gif">\n          <object id="animated-svg-1" type="image/svg+xml" data="'.concat(window.defaultModulePath,'/images/helper/step1.svg"></object>\n          <object id="animated-svg-2" type="image/svg+xml" data="').concat(window.defaultModulePath,'/images/helper/step2.svg"></object>\n          <object id="animated-svg-3" type="image/svg+xml" data="').concat(window.defaultModulePath,'/images/helper/step3.svg"></object>\n        </div>\n        <div class="s3d__helper-gif__title"  data-type="title"></div>\n        <div class="s3d__helper-gif__group">\n          <div class="s3d__helper-gif__count js-s3d__helper-gif__count">\n          <span data-current_count></span>/<span data-all_count></span>\n        </div>\n          <div class="s3d__helper-gif__link js-s3d__helper-gif__link">\n            <svg class="s3d__helper-gif__link-arrow" width="32" height="37" viewBox="0 0 32 37" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path fill-rule="evenodd" clip-rule="evenodd" d="M13.0182 0.922852L31.1554 18.5L13.0182 36.0772L10.9304 33.9229L25.2968 20H0V17H25.2968L10.9304 3.07717L13.0182 0.922852Z" fill="white"/>\n            </svg>\n          </div>\n        </div>\n    </div>\n    <div class="s3d__helper-gif__close js-s3d__helper-gif__close" data-type="close"></div>\n  </div>\n')),this.wrap=document.querySelector(".js-s3d__helper-gif-wrap"),d()(".js-s3d__helper-gif__close").on("click",(function(){n.hiddenHelper()})),d()(".js-s3d__helper-gif__link").on("click",(function(){n.currentWindow++,n.currentWindow>=n.countSlides?n.hiddenHelper():n.update(n.currentWindow)})),e=d()(".js-s3d-ctr__helper"),_.size(e)>0&&e.on("click",(function(){n.currentWindow=0,n.update(n.currentWindow),setTimeout((function(){n.showHelper()}),300)})),!window.localStorage.getItem("info")){t.next=8;break}return t.abrupt("return");case 8:this.updateContent(0,(function(){n.triggerGif(n.currentWindow)})),this.wrap.querySelector("[data-all_count]").innerHTML=this.countSlides,setTimeout((function(){n.showHelper()}),500);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"update",value:function(t){var e=this;this.updateContent(t,(function(){e.triggerGif(e.currentWindow,"hide"),e.triggerGif(e.currentWindow+1)}))}},{key:"showHelper",value:function(){this.wrap.classList.add("s3d-active")}},{key:"hiddenHelper",value:function(){this.wrap.classList.remove("s3d-active"),window.localStorage.setItem("info",!0),this.triggerGif(this.currentWindow,"hide")}},{key:"updateContent",value:function(t,e){var n=this;document.querySelector(".js-s3d__helper-gif").dataset.step=this.currentWindow;var a=this.wrap.querySelector('[data-type="title"]'),o=this.wrap.querySelector('[data-type="close"]'),r=this.wrap.querySelector(".s3d__helper-gif__group"),i=this.wrap.querySelector("[data-current_count]"),s=this.wrap.querySelector("[data-all_count]");this.animation.fromTo(a,{opacity:1},{opacity:0}).fromTo(o,{opacity:1},{opacity:0},"<").fromTo(r,{opacity:1},{opacity:0},"<").then((function(){a.innerHTML=n.i18n.t("Helper.slide-".concat(t,"--title")),o.innerHTML=n.i18n.t("Helper.close"),i.innerHTML=n.currentWindow+1,s.innerHTML=n.countSlides,e(),n.animation.fromTo(a,{opacity:0},{opacity:1}).fromTo(o,{opacity:0},{opacity:1},"<").fromTo(r,{opacity:0},{opacity:1},"<")}),">")}},{key:"triggerGif",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"show",n=t>0?t:1,a=document.getElementById("animated-svg-".concat(n)),o=new It.a(0,1,1,0),r=at.y.timeline({direction:1.8,ease:o}),i="hide"===e?1:0,s="hide"===e?0:1;a.contentDocument.querySelector("svg").dispatchEvent(new Event("click")),r.fromTo(a,{autoAlpha:i},{autoAlpha:s})}}]),t}(),Lt=function(t,e,n){return t+e>=n},Tt=function(t,e,n){return e-t-n},Et=function(t,e,n){return e-t-n},Dt=function(t,e){var n=e.floor,a=e.count,o=e.free,r=e.build,i=e.section;return'<button class="s3d__close s3d-infoBox__close" data-s3d-event=closed></button>\n  <div class="s3d-infoBox__floor">\n  <div class="s3d-infoBox__title">\n    <span data-s3d-event="update" data-s3d-update="floor">'.concat(n,"</span>\n    ").concat(t.t("floor"),'\n  </div>\n  <table class="s3d-infoBox__table">\n    <tbody>\n      <tr class="s3d-infoBox__row">\n        <td class="s3d-infoBox__name">').concat(t.t("apartments",{count:5}),':</td>\n        <td class="s3d-infoBox__value" data-s3d-event="update" data-s3d-update="rooms">').concat(a,'</td>\n      </tr>\n      <tr class="s3d-infoBox__row">\n        <td class="s3d-infoBox__name">').concat(t.t("floor__free--flats"),':</td>\n        <td class="s3d-infoBox__value" data-s3d-event="update" data-s3d-update="free">').concat(o,'</td>\n      </tr>\n    </tbody>\n  </table>\n  <button class="s3d-infoBox__link" data-s3d-event="transform" data-type="floor" data-section="').concat(i,'" data-build="').concat(r,'" data-floor="').concat(n,'">\n    <span>Перейти до плана этажа</span>\n  </button>\n</div>')},Ht=function(t,e){var n="".concat(window.defaultModulePath,"/images/examples/no-image.png"),a=e.rooms,o=e.area,r=e.floor,i=e.id,s=e.img_small;return'<button class="s3d__close s3d-infoBox__close" data-s3d-event="closed"></button>\n<div class="s3d-infoBox__flat">\n  <div class="s3d-infoBox__image">\n    <img src="'.concat(null!=s?s:n,'"/>\n  </div>\n  <div class="s3d-infoBox__title">\n  <span data-s3d-event="update" data-s3d-update="rooms">').concat(a,"</span>\n  ").concat(t.t("count--rooms"),'\n</div>\n  <table class="s3d-infoBox__table">\n  <tbody>\n  <tr class="s3d-infoBox__row">\n    <td class="s3d-infoBox__name">').concat(t.t("area"),'</td>\n    <td class="s3d-infoBox__value">\n      <span data-s3d-event="update" data-s3d-update="area">').concat(o,'</span>м<sup>2</sup>\n    </td>\n  </tr>\n  <tr class="s3d-infoBox__row">\n    <td class="s3d-infoBox__name">').concat(t.t("type"),':</td>\n    <td class="s3d-infoBox__value" data-s3d-event="update" data-s3d-update="rooms">').concat(a,'к</td>\n  </tr>\n  <tr class="s3d-infoBox__row">\n    <td class="s3d-infoBox__name">').concat(t.t("floor"),'</td>\n    <td class="s3d-infoBox__value" data-s3d-event="update" data-s3d-update="floor">').concat(r,'</td>\n  </tr>\n  </tbody>\n  </table>\n  <button class="s3d-infoBox__link" data-s3d-event="transform" data-type="flat" data-id="').concat(i,'">\n    <span>Перейти до квартири</span>\n  </button>\n</div>')},Rt=function(t){return'<div class="s3d-infoBox__flatSold">\n  <button class="s3d__close s3d-infoBox__close" data-s3d-event="closed"></button>\n  <div class="s3d-infoBox__title">\n    '.concat(t.t("flatSold"),"\n  </div>\n</div>")},$t=function(t,e){var n=e.type,a=e.flyby,o=e.side;return n?'<div class="s3d-infoBox__general">\n<button class="s3d__close s3d-infoBox__close" data-s3d-event="closed"></button>\n<span>\n  '.concat(t.t("number--flyby"),": ").concat(e.build,'\n</span>\n<button class="s3d-infoBox__link" data-s3d-event="transform" ').concat(n&&'data-type="'.concat(n,'"')," ").concat(a?'data-flyby="'.concat(a,'"'):""," ").concat(o?'data-side="'.concat(o,'"'):"",'>\n  <svg width="7" height="12" viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M1 1L6 6L1 11"/>\n  </svg>\n</button>\n</div>'):""},Mt=function(t,e){var n=e.build?'<span class="s3d-infoBox__title" style="white-space: nowrap">'.concat(t.t("build")," №: ").concat(e.build,"</span>"):"";return'<div class="s3d-infoBox__sold">\n<span class="s3d-infoBox__title">\n  '.concat(t.t("sold"),"\n</span>\n").concat(n,'\n<button class="s3d__close s3d-infoBox__close" data-s3d-event="closed"></button>\n</div>')},qt=function(t){return'<div class="s3d-infoBox__sale-close">\n<span class="s3d-infoBox__title">\n  '.concat(t.t("flatClosed"),'\n</span>\n<button class="s3d__close s3d-infoBox__close" data-s3d-event="closed"></button>\n</div>')},Wt=function(t,e){return'<div class="s3d-infoBox__infrastructure">\n  <span class="s3d-infoBox__title">\n    '.concat(t.t(["infrastructure.".concat(e.id),"infrastructure.default"]),'\n  </span>\n<button class="s3d__close s3d-infoBox__close" data-s3d-event="closed"></button>\n</div>')},Nt=function(){function t(e){var n=this;k()(this,t),P()(this,"mappingClickEvents",{closed:function(t){n.updateState("static"),n.removePolygonSelected()},link:function(t){n.updateState("static"),n.removePolygonSelected(),n.updateFsm(t.dataset)}}),this.infoBox="",this.hoverData$=e.hoverData$,this.selectData=e.selectData,this.updateFsm=e.updateFsm,this.getFlat=e.getFlat,this.getFloor=e.getFloor,this.state={type:e.typeSelectedFlyby$.value},this.stateUI={status:"static"},this.stateConfig=["static","hover","active"],this.i18n=e.i18n,this.changeState=this.changeState.bind(this),this.disable=this.disable.bind(this),this.init()}return x()(t,[{key:"init",value:function(){var t=this;this.createInfo(),this.infoBox.addEventListener("click",(function(e){var n={closed:L('[data-s3d-event="closed"]',e),link:L('[data-s3d-event="transform"]',e)};Object.entries(n).map((function(e){var n=o()(e,2),a=n[0],r=n[1];return _.isObject(r)&&t.mappingClickEvents[a](r)}))}))}},{key:"removeSvgFlatActive",value:function(){d()(".js-s3d__svgWrap .polygon__flat-svg").removeClass("polygon__flat-svg")}},{key:"removePolygonSelected",value:function(){d()(".js-s3d__svgWrap .polygon__selected").removeClass("polygon__selected")}},{key:"updateState",value:function(t,e){return this.stateConfig.includes(t)&&(this.stateUI.status=t),this.dispatch(e),""}},{key:"changeState",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("active"!==this.stateUI.status){var a=null;if(n)switch(n.type){case"flat":a=this.getFlat(+n.id),this.state.type=null!==(e={1:"flat",3:"closed"}[a.sale])&&void 0!==e?e:"flatSold";break;case"floor":this.state.type=n.type,a=this.getFloor(n);break;default:this.state.type=n.type,a=n}if(a){if(!_.isEqual(n,this.hoverData$.value))return"hover"===t&&t===this.stateUI.status?(this.hoverData$.next(n),void this.updateInfo(a)):void this.updateState(t,a)}else this.updateState("static",null)}}},{key:"dispatch",value:function(t){switch(this.stateUI.status){case"static":this.hoverData$.next({}),this.infoBox.style.cssText="opacity: 0; pointer-events: none;";break;case"hover":case"active":this.hoverData$.next(t),this.infoBox.style.cssText="opacity: 1; pointer-events: painted;",this.updateInfo(t);break;default:this.hoverData$.next({}),this.infoBox.style.cssText="opacity: 0; pointer-events: none;"}}},{key:"update",value:function(t,e){void 0!==e&&this.updateState(e)}},{key:"disable",value:function(t){""!==this.infoBox&&(t?this.infoBox.classList.add("s3d-infoBox__disable"):this.infoBox.classList.remove("s3d-infoBox__disable"))}},{key:"createInfo",value:function(){this.infoBox=document.querySelector('[data-s3d-type="infoBox"]')}},{key:"updatePosition",value:function(t){var e=function(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o={x:n.pageX+a,y:n.pageY},r={height:e.offsetHeight,width:e.offsetWidth},i={height:t.offsetHeight,width:t.offsetWidth},s=Lt(n.pageX,i.width,r.width),l=Lt(n.pageY,i.height,r.height);return{x:s?Et(i.width,n.pageX,a):o.x,y:l?Tt(i.height,r.height,a):o.y}}(this.infoBox,document.documentElement,t,50),n=e.x,a=e.y;this.infoBox.style.top="".concat(a,"px"),this.infoBox.style.left="".concat(n,"px")}},{key:"updateInfo",value:function(t){if(!_.isUndefined(t)){var e={floor:Dt,flat:Ht,flatSold:Rt,section:$t,flyby:$t,sold:Mt,closed:qt,infrastructure:Wt};e[this.state.type]?this.infoBox.innerHTML=e[this.state.type](this.i18n,t):this.updateState("static")}}}]),t}();function Ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function Vt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ut(Object(n),!0).forEach((function(e){P()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n(70);var zt=function(t){M()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=U()(t);if(e){var o=U()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return W()(this,n)}}(n);function n(t){var a;return k()(this,n),(a=e.call(this)).types={area:"range",floor:"range",sale:"checkbox",rooms:"checkbox",option:"option"},a.configProject={},a.currentFilteredFlatIds$=t.currentFilteredFlatIds$,a.currentFilteredFloorsData$=t.currentFilteredFloorsData$,a.typeSelectedFlyby$=t.typeSelectedFlyby$,a.flats=t.flats,a.uiMiniFilter=!1,a.isListScrollBlocked=!1,a}return x()(n,[{key:"init",value:function(){this.configProject=this.createFilterParam(this.flats),this.reduceFilter=this.reduceFilter.bind(this),this.emit("setAmountAllFlat",Object(z.size)(this.flats)),this.filterFlatStart(),this.emit("updateHeightFilter"),this.deb=A(this.resize.bind(this),500)}},{key:"filterFlatStart",value:function(){O(".js-s3d-filter__table"),O(".js-s3d-pl__list");var t=this.getFilterParam(this.configProject);this.updateAllParamFilter(t);var e=this.startFilter(this.flats,t),n=e.flats,a=e.floors;this.emit("setAmountSelectFlat",n.length),this.currentFilteredFlatIds$.next(n),this.currentFilteredFloorsData$.next(a)}},{key:"createFilterParam",value:function(t){var e=this,n={},a=function(a){var o={},r=void 0;switch(e.types[a]){case"range":r=e.createParam(t,a,e.createRangeParam.bind(e)),Object(z.forIn)(r,(function(t,n){o[n]={type:"range",skin:"round",elem:e.createRange(t)}}));break;case"checkbox":o=e.createParam(t,a,e.createCheckedParam);break;case"option":o=e.createParam(t,a,e.createOptionParam);break;default:o={}}n=Vt(Vt({},n),o)};for(var o in this.types)a(o);return n}},{key:"createParam",value:function(t,e,n){return Object.keys(t).reduce((function(a,o){var r=t[o];return Vt(Vt({},a),n(r,e,a))}),{})}},{key:"createRangeParam",value:function(t,e,n){if(!Object(z.has)(t,e))return n;var a=n;return a[e]?(t[e]<a[e].min&&(a[e].min=t[e]),t[e]>a[e].max&&(a[e].max=t[e]),a[e].type=e,a):(a[e]={min:t[e],max:t[e]},a)}},{key:"createCheckedParam",value:function(t,e,n){if(!Object(z.has)(t,e))return n;var a=document.querySelectorAll(".js-s3d-filter__checkboxes [data-type = ".concat(e,"]")),o=[];a.forEach((function(t){o.push(Object(z.toNumber)(t.dataset[e]))}));var r={type:"checkbox",elem:a,value:o};return P()({},e,r)}},{key:"createOptionParam",value:function(t,e){var n=document.querySelectorAll(".js-s3d-filter__checkboxes [data-type= ".concat(e,"]")),a=[];n.forEach((function(t){a.push(t.dataset[e])}));var o={type:"option",elem:n,value:a};return P()({},e,o)}},{key:"createRange",value:function(t){if(void 0!==t.type){var e=function(t){i.prop("value",t.from),s.prop("value",t.to)},n=function(e){var n=d()(this).prop("value");"from"===e?n<o?n=o:n>c.result.to&&(n=c.result.to):"to"===e&&(n<c.result.from?n=c.result.from:n>r&&(n=r)),c.update("from"===e?{from:n}:{to:n}),d()(this).prop("value",n),a.filterFlatStart(Vt({min:c.result.from,max:c.result.to},{type:t.type}))},a=this,o=t.min,r=t.max,i=d()(".js-filter-range [data-type=".concat(t.type,'][data-border="min"]')),s=d()(".js-filter-range [data-type=".concat(t.type,'][data-border="max"]')),l=d()(".js-filter-range [data-type=".concat(t.type,"]"));l.ionRangeSlider({type:"double",grid:!1,min:o,max:r,from:o||0,to:r||0,step:t.step||1,onStart:e,onChange:e,onFinish:function(n){e(n),a.filterFlatStart(Vt({min:n.from,max:n.to},{type:t.type}))},onUpdate:e});var c=l.data("ionRangeSlider");return c.update({min:o,max:r,from:o,to:r}),i.on("change",(function(){n.call(this,"from")})),s.on("change",(function(){n.call(this,"to")})),c}return null}},{key:"resetFilter",value:function(){var t=this,e={range:function(t){return t.elem.update({from:t.elem.result.min,to:t.elem.result.max})},checkbox:function(t){return t.elem.forEach((function(t){t.checked=!t.checked&&""}))},option:function(t){return t.elem.forEach((function(t){t.checked=!t.checked&&""}))}};Object.keys(this.configProject).forEach((function(n){var a=t.configProject[n];e[a.type]&&e[a.type](a)})),this.filterFlatStart()}},{key:"updateAllParamFilter",value:function(t){var e=this,n=function(n){var a=t[n],o=e.getTypeFilterParam(n),r=Object(z.cloneDeep)(a).value;switch(o){case"checkbox":Array.isArray(r)&&0===r.length&&e.configProject[n].value.forEach((function(t){return r.push(t)})),r=r.join(", "),e.emit("updateMiniInfo",{type:n,value:r,key:"amount"});break;case"range":e.emit("updateMiniInfo",{type:n,value:a.min,key:"min"}),e.emit("updateMiniInfo",{type:n,value:a.max,key:"max"})}};for(var a in t)n(a)}},{key:"getTypeFilterParam",value:function(t){for(var e in this.types)if(e.includes(t))return this.types[e];return null}},{key:"startFilter",value:function(t,e){var n=this,a=Object.values(t),r=Object.entries(e),i={},s=[];return{flats:a.reduce((function(t,e){if(!r.every((function(t){var a=o()(t,2),r=a[0],i=a[1];if(!Object(z.has)(e,[r]))throw new Error('flat is not include key: "'.concat(r,'"'));switch(i.type){case"range":return n.checkRangeParam(e,r,i);case"checkbox":return n.checkСheckboxParam(e,r,i);case"option":return n.checkOptionParam(e,r,i)}return!1})))return t;var a=e.build,l=e.section,c=e.floor;return Object(z.has)(i,[a,l,c])||(i[a]||(i[a]={}),i[a][l]||(i[a][l]={}),i[a][l][c]||(i[a][l][c]=!0),s.push({build:a,section:l,floor:c})),[].concat(D()(t),[e.id])}),[]),floors:s}}},{key:"checkRangeParam",value:function(t,e,n){return Object(z.has)(t,e)&&t[e]>=n.min&&t[e]<=n.max}},{key:"checkСheckboxParam",value:function(t,e,n){return Object(z.includes)(n.value,t[e])||0===Object(z.size)(n.value)}},{key:"checkOptionParam",value:function(t,e,n){return 0===n.value.length||n.value.some((function(n){return t[e][n]}))}},{key:"getFilterParam",value:function(t){var e={},n=function(n){var a=t[n].type;switch(a){case"checkbox":e[n]={},e[n].value=[],t[n].elem.forEach((function(t){t.checked&&e[n].value.push(Object(z.toNumber)(t.dataset[n]))}));break;case"range":e[n]={},e[n].min=t[n].elem.result.from,e[n].max=t[n].elem.result.to;break;case"option":e[n]={},e[n].value=[],t[n].elem.forEach((function(t){t.checked&&e[n].value.push(t.dataset[n])}))}e[n].type=a};for(var a in t)n(a);return e}},{key:"reduceFilter",value:function(t){t!==this.uiMiniFilter&&(this.uiMiniFilter=null!=t?t:!this.uiMiniFilter,this.changeListScrollBlocked(!0),this.emit("reduceFilter",this.uiMiniFilter))}},{key:"changeListScrollBlocked",value:function(t){this.isListScrollBlocked=t}},{key:"hideFilter",value:function(){this.emit("hideFilter")}},{key:"resize",value:function(){this.hideFilter()}}]),n}(K);var Kt=function(t){M()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=U()(t);if(e){var o=U()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return W()(this,n)}}(n);function n(t,a){var o;return k()(this,n),(o=e.call(this))._model=t,o._elements=a,o.filterTopHeight=document.querySelector(".s3d-filter__top").offsetHeight,d()("#resetFilter").on("click",(function(){o.emit("resetFilter")})),d()("#resetFilter-mobile").on("click",(function(){o.emit("resetFilter")})),d()(".js-s3d-filter__close").on("click",(function(){o.hidden()})),d()(".js-s3d-filter").on("click",".js-s3d-filter__button--apply",(function(){o.hidden()})),d()(".js-s3d-filter__checkboxes").on("click","input",(function(){o.emit("changeFilterHandler")})),d()("#hideFilter").on("click",(function(){o.emit("reduceFilterHandler")})),d()(".js-s3d-ctr__filter").on("click",(function(t){t.preventDefault(),o.emit("reduceFilterHandler",!1),o.show()})),window.addEventListener("resize",(function(){o.emit("resizeHandler"),o.hidden(),o.filterTopHeight=document.querySelector(".s3d-filter__top").offsetHeight,o.updateHeightFilter()})),t.on("hideFilter",(function(){o.hidden()})),t.on("setAmountAllFlat",(function(t){o.setAmountAllFlat(t)})),t.on("setAmountSelectFlat",(function(t){o.setAmountSelectFlat(t)})),t.on("updateMiniInfo",(function(t){o.updateMiniInfo(t)})),t.on("updateHeightFilter",(function(){o.updateHeightFilter()})),t.on("reduceFilter",(function(t){o.changeHeightFilterBlock(t)})),o}return x()(n,[{key:"updateHeightFilter",value:function(){var t=document.querySelector(".s3d-filter__top");t.style.height="auto",this.filterTopHeight=t.offsetHeight,t.style.height="".concat(this.filterTopHeight,"px")}},{key:"show",value:function(){d()(".js-s3d-filter").addClass("s3d-open-filter")}},{key:"hidden",value:function(){d()(".js-s3d-filter").removeClass("s3d-open-filter")}},{key:"setAmountAllFlat",value:function(t){d()(".js-s3d__amount-flat__num-all").html(t)}},{key:"setAmountSelectFlat",value:function(t){d()(".js-s3d__amount-flat__num").html(t)}},{key:"updateMiniInfo",value:function(t){var e=t.value,n=t.type,a=t.key;d()(".js-s3d-filter__mini-info [data-type=".concat(n,"]")).find("[data-type=".concat(a,"]")).html(e)}},{key:"changeHeightFilterBlock",value:function(t){var e={filter:document.querySelector(".js-s3d-filter"),filterTop:document.querySelector(".s3d-filter__top"),miniInfo:document.querySelector(".js-s3d-filter__mini-info"),btn:document.querySelector("#hideFilter")};this[t?"filterScrollActive":"filterScrollUnActive"](e)}},{key:"filterScrollActive",value:function(t){var e=this,n=t.btn,a=t.filter,o=t.filterTop,r=t.miniInfo,i=new at.d,s=getComputedStyle(o).getPropertyValue("--filter-title-height"),l=getComputedStyle(r).getPropertyValue("--mini-info-height");n.innerText=n.dataset.showText,a.classList.add("s3d-filter__scroll-active"),i.to(o,{height:0,paddingBottom:s,duration:.4,ease:at.b.easeInOut}).to(r,{height:l,opacity:1,duration:.4,ease:at.b.easeInOut},"<").eventCallback("onComplete",(function(){e.emit("changeListScrollBlocked",!1)}))}},{key:"filterScrollUnActive",value:function(t){var e=this,n=t.btn,a=t.filter,o=t.filterTop,r=t.miniInfo,i=new at.d;n.innerText=n.dataset.hideText,a.classList.remove("s3d-filter__scroll-active"),i.to(o,{height:this.filterTopHeight,paddingBottom:0,duration:.4,ease:at.b.easeInOut}).to(r,{height:0,opacity:0,duration:.4,ease:at.b.easeInOut},"<").eventCallback("onComplete",(function(){setTimeout((function(){e.emit("changeListScrollBlocked",!1)}),400)}))}}]),n}(K),Gt=function t(e,n){k()(this,t),this._model=e,this._view=n,n.on("resizeHandler",(function(){e.resize()})),n.on("resetFilter",(function(){e.resetFilter()})),n.on("hideFilter",(function(){e.hideFilter()})),n.on("changeFilterHandler",(function(){e.filterFlatStart()})),n.on("reduceFilterHandler",(function(t){e.reduceFilter(t)})),n.on("changeListScrollBlocked",(function(t){e.changeListScrollBlocked(t)}))};function Jt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jt(Object(n),!0).forEach((function(e){P()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Xt=function(){function t(e,n){k()(this,t),this.hoverData$=e.hoverData$,this.currentFilteredFlatIds$=e.currentFilteredFlatIds$,this.getFlat=e.getFlat,this.checkNextFlyby=e.checkNextFlyby,this.changePopupFlyby=e.changePopupFlyby,this.currentShowAmount=0,this.showFlatList=[],this.updateFsm=e.updateFsm,this.directionSortUp=!0,this.filter=n,this.favouritesIds$=e.favouritesIds$,this.init()}return x()(t,[{key:"init",value:function(){var t=this,e=(document.querySelector(".js-s3d-filter"),document.querySelector(".js-s3d-filter__table")),n=document.querySelector(".js-s3d-filter__body");this.currentFilteredFlatIds$.subscribe((function(a){e.scrollTop=0,n.textContent="",t.currentShowAmount=0,t.updateShowFlat(a),t.createListFlat(a,n,30)})),this.hoverData$.subscribe((function(e){var n=e.id;n&&t.setActiveFlat(n)})),e.addEventListener("scroll",Object(z.debounce)((function(e){t.filter.isListScrollBlocked||(t.filter.reduceFilter(e.target.scrollTop>50),et(e.target,t.showFlatList,t.currentShowAmount,t.createListFlat.bind(t)))}),150,{leading:!0,trailing:!0})),d()(".js-s3d-filter__mini-info__button").on("click",(function(e){t.filter.reduceFilter(!1)})),d()(".js-s3d-filter__body").on("click",".s3d-filter__tr",(function(e){var n=+e.currentTarget.dataset.id;if(!d()(e.originalEvent.target).hasClass("js-s3d-add__favourite")&&"INPUT"!==e.originalEvent.target.nodeName){var a=t.checkNextFlyby({type:"flyby"},n);if(null===a)return null;a.change?t.changePopupFlyby(a,e.currentTarget):(window.innerWidth<=992&&t.filter.emit("hideFilter"),t.updateFsm(Zt(Zt({},a),{},{id:n})))}})),d()(".js-s3d-filter__head").on("click",".s3d-filter__th",(function(e){var n=e.currentTarget&&e.currentTarget.dataset&&Object(z.has)(e.currentTarget.dataset,"sort")?e.currentTarget.dataset.sort:void 0;void 0===n||n&&"none"===n||(e.currentTarget.classList.contains("s3d-sort-active")?t.directionSortUp=!t.directionSortUp:t.directionSortUp=!0,d()(".s3d-sort-active").removeClass("s3d-sort-active"),t.directionSortUp&&d()(e.currentTarget).addClass("s3d-sort-active"),t.currentFilteredFlatIds$.next(function(t,e,n,a){return t.reduce((function(t,a){var o=n(a);return t.push([o.id,o[e]]),t}),[]).sort(a?function(t,e){return+t[1]<+e[1]?-1:+t[1]>+e[1]?1:0}:function(t,e){return+t[1]>+e[1]?-1:+t[1]<+e[1]?1:0}).map((function(t){return t[0]}))}(t.showFlatList,n,t.getFlat,t.directionSortUp)))}))}},{key:"setActiveFlat",value:function(t){d()(".js-s3d-filter__body .polygon__flat-svg").removeClass("polygon__flat-svg"),d()(".js-s3d-filter__body [data-id=".concat(t,"]")).addClass("polygon__flat-svg")}},{key:"updateShowFlat",value:function(t){this.showFlatList=t}},{key:"createListFlat",value:function(t,e,n){var a,o=this,r=this.favouritesIds$.value,i=t.reduce((function(t,e,a){return a>=o.currentShowAmount&&a<o.currentShowAmount+n&&t.push(o.createElem(o.getFlat(+e),r)),t}),[]);this.currentShowAmount+=n,(a=document.querySelector(".js-s3d-filter__body")).append.apply(a,D()(i));var s=this.hoverData$.value.id;s&&this.setActiveFlat(s)}},{key:"createElem",value:function(t,e){var n=e.includes(+t.id)?"checked":"",a=document.createElement("tr");return a.dataset.id=t.id,a.classList="s3d-filter__tr js-s3d-filter__tr",a.innerHTML='\n          <td class="s3d-filter__th--offset"></td>\n\t\t\t\t\t<td class="s3d-filter__td">'.concat(t.type||"-",'</td>\n\t\t\t\t\t<td class="s3d-filter__td">').concat(t.rooms,'</td>\n\t\t\t\t\t<td class="s3d-filter__td">').concat(t.floor,'</td>\n\t\t\t\t\t<td class="s3d-filter__td">').concat(t.area,' m<sup>2</sup></td>\n\t\t\t\t\t<td class="s3d-filter__td">\n\t\t\t\t\t\t<label data-id="').concat(t.id,'" class="s3d__favourite s3d-filter__favourite js-s3d-add__favourite">\n\t\t\t\t\t\t\t<input type="checkbox" ').concat(n,'>\n\t\t\t\t\t\t\t<svg role="presentation"><use xlink:href="#icon-favourites"></use></svg>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td class="s3d-filter__th--offset"></td>\n\t\t\t'),a}}]),t}();function Yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function Qt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yt(Object(n),!0).forEach((function(e){P()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var te=function(){function t(e,n){k()(this,t),this.state={},this.i18n=n,this.updateFsm=e.updateFsm,this.getFlat=e.getFlat,this.init(),this.updateState=this.updateState.bind(this),this.updateContent=this.updateContent.bind(this)}return x()(t,[{key:"init",value:function(){var t=this;document.querySelector(".js-s3d__slideModule").insertAdjacentHTML("beforeend",function(t){return'\n    <div class="s3d-popup-flyby__wrap js-s3d-popup-flyby">\n            <div class="s3d-popup-flyby__active js-s3d-popup-flyby__active"></div>\n            <div class="s3d-popup-flyby__bg">\n              <div class="s3d-popup-flyby__bg-active js-s3d-popup-flyby__bg-active"></div>\n              <div class="s3d-popup-flyby__bg-all"></div>\n            </div>\n            <div class="s3d-popup-flyby">\n              <div class="s3d-popup-flyby__close" data-type="close"></div>\n              <div class="s3d-popup-flyby__title">'.concat(t.t("PopupFlyby.title"),'<span data-type="title">2А</span></div>\n              <div class="s3d-popup-flyby__line"></div>\n              <div class="s3d-popup-flyby__text" data-type="text">').concat(t.t("PopupFlyby.description"),'</div>\n              <button class="s3d-popup-flyby__link" data-type="next">\n                ').concat(t.t("PopupFlyby.btn"),"\n              </button>\n            </div>\n          </div>\n  ")}(this.i18n)),this.popup=document.querySelector(".js-s3d-popup-flyby"),this.popup.addEventListener("click",(function(e){e.target.closest('[data-type="close"]')&&t.closePopup()})),this.popup.addEventListener("click",(function(e){e.target.closest('[data-type="next"]')&&t.activateTranslate()}))}},{key:"updateState",value:function(t){this.state=t}},{key:"updateContent",value:function(t){var e=document.querySelector(".js-s3d-filter"),n=t.getBoundingClientRect(),a=t.offsetHeight,o=n.y+a/2;if(document.querySelector(".js-s3d-popup-flyby__bg-active").setAttribute("style","\n      transform: translate(0, ".concat(o,"px);\n      width: ").concat(e.offsetWidth,"px")),window.innerWidth<=680){var r=o>window.innerHeight/2?"top: ".concat(n.top-20,"px; transform: translate(-50%, -100%);"):"top: ".concat(n.bottom+20,"px; transform: translate(-50%, 0);");document.querySelector(".s3d-popup-flyby").setAttribute("style","\n      ".concat(r,"\n      width: ").concat(e.offsetWidth,"px"))}this.flatId=_.toNumber(t.dataset.id);var i=this.getFlat(this.flatId);this.popup.querySelector('[data-type="title"]').innerHTML=i.type}},{key:"openPopup",value:function(t){this.updateState(t),this.popup.classList.contains("s3d-active")||this.popup.classList.add("s3d-active")}},{key:"closePopup",value:function(){this.popup.classList.remove("s3d-active")}},{key:"activateTranslate",value:function(){this.closePopup(),this.updateFsm(Qt(Qt({},this.state),{},{id:this.flatId}))}}]),t}(),ee=n(15);var ne=function(t){M()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=U()(t);if(e){var o=U()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return W()(this,n)}}(n);function n(t,a){var o;return k()(this,n),(o=e.call(this)).getFlat=t.getFlat,o.setFlat=t.setFlat,o.updateFsm=t.updateFsm,o.fsm=t.fsm,o.animationSpeed=800,o.i18n=a,o.favouritesIds$=t.favouritesIds$,o.updateFavouritesBlock=o.updateFavouritesBlock.bind(R()(o)),console.log(t),o}return x()(n,[{key:"init",value:function(){var t=this;this.favouritesIds$.subscribe((function(e){t.emit("updateCountFavourites",e.length),t.emit("updateFavouritesInput",e)})),this.favouritesIds$.next(this.getFavourites())}},{key:"update",value:function(){this.updateFavouritesBlock(),this.emit("updateFvCount",this.favouritesIds$.value.length)}},{key:"selectElementHandler",value:function(t){this.updateFsm({type:"flat",id:t})}},{key:"checkedFlat",value:function(t){var e=this.getFlat(t),n=this.favouritesIds$.value,a=_.isObjectLike(e)?"xor":"difference",o=_[a](n,[t]);this.favouritesIds$.next(o)}},{key:"removeElement",value:function(t){this.emit("removeElemInPageHtml",t)}},{key:"getFavourites",value:function(){return(JSON.parse(sessionStorage.getItem("favourites"))||[]).filter((function(t){return!checkValue(t)})).reduce((function(t,e){return t.indexOf(+e)<0&&t.push(+e),t}),[])}},{key:"openFavouritesHandler",value:function(){this.updateFsm({type:"favourites"})}},{key:"updateFavouritesBlock",value:function(){var t=this;this.emit("clearAllHtmlTag",".js-s3d-fv__list .js-s3d-card");var e=this.favouritesIds$.value.map((function(e){return tt(t.i18n,t.getFlat(e),t.favouritesIds$)}));this.emit("setInPageHtml",e)}},{key:"changeFavouritesHandler",value:function(t,e){var n=this,a=parseInt(t.getAttribute("data-id"));if(a){var o=this.favouritesIds$.value,r=_.xor(o,[a]);sessionStorage.setItem("favourites",JSON.stringify(r)),e&&this.moveToFavouriteEffectHandler(t,!r.includes(a)),setTimeout((function(){n.favouritesIds$.next(r),0===r.length&&"favourites"===n.fsm.state&&window.history.back()}),this.animationSpeed)}}},{key:"moveToFavouriteEffectHandler",value:function(t,e){var n=t.querySelector("svg"),a=document.querySelector(".js-s3d__favourite-icon"),o=this.getBetweenDistance(n,a);this.animateFavouriteElement(a,n,o,e)}},{key:"getBetweenDistance",value:function(t,e){var n=t.getBoundingClientRect(),a=e.getBoundingClientRect(),o=n.left+n.width/2,r=n.top+n.height/2;return{x:a.left+a.width/2-o,y:a.top+a.height/2-r}}},{key:"getSpeedAnimateHeart",value:function(t){return Math.abs(t.x)+Math.abs(t.y)}},{key:"animateFavouriteElement",value:function(t,e,n,a){if(void 0!==ee.a){var o=e.cloneNode(!0);o.classList.add("s3d-favourite__pulse");var r=e.getBoundingClientRect();document.querySelector(".js-s3d__slideModule").insertAdjacentElement("beforeend",o),o.style.cssText+="\n\t\t\twidth:".concat(r.width,"px;\n\t\t\theight:").concat(r.height,"px;\n\t\t\tleft:").concat(r.left,"px;\n\t\t\ttop:").concat(r.top,"px;\n\t\t\t");var i=this.animationSpeed/1e3*(this.getSpeedAnimateHeart(n)/850),s=new at.d({delay:0,repeat:0,paused:!0,onComplete:function(){o.remove()}});!0===a?(s.from(o,{y:n.y,duration:i,ease:at.b.easeInOut}),s.from(o,{x:n.x,duration:i,ease:at.b.easeInOut},"-=".concat(i))):(s.to(o,{y:n.y,duration:i,ease:at.b.easeInOut}),s.to(o,{x:n.x,duration:i,ease:at.b.easeInOut},"-=".concat(i))),s.set(o,{x:0,y:0}),s.set(o,{clearProps:"all"}),s.play()}}}]),n}(K),ae=function t(e,n){k()(this,t),this._model=e,this._view=n,n.on("clickFavouriteOpen",(function(){e.openFavouritesHandler()})),n.on("clickFavouriteHandler",(function(t){e.changeFavouritesHandler(t,!0)})),n.on("removeElement",(function(t){var n=t.closest(".js-s3d-card"),a=parseInt(n.getAttribute("data-id"));a&&(e.changeFavouritesHandler(n,!1),e.removeElement(a))})),n.on("clickElementHandler",(function(t){var n=parseInt(t.getAttribute("data-id"));e.selectElementHandler(n)}))};var oe=function(t){M()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=U()(t);if(e){var o=U()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return W()(this,n)}}(n);function n(t,a,o){var r;return k()(this,n),(r=e.call(this))._model=t,r._elements=a,r.i18n=o,document.querySelector(".js-s3d__favourite-open").addEventListener("click",(function(t){r.emit("clickFavouriteOpen")})),document.querySelector(".js-s3d__slideModule").addEventListener("click",(function(t){var e=L(".js-s3d-add__favourite",t);_.isObject(e)&&e&&"INPUT"!==t.target.tagName&&(t.preventDefault(),r.emit("clickFavouriteHandler",e))})),document.querySelector("#js-s3d__favourites").addEventListener("click",(function(t){var e=L(".js-s3d-card__close",t),n=L(".js-s3d-card",t);switch(!0){case _.isObject(e):r.emit("removeElement",e);break;case _.isObject(n):r.emit("clickElementHandler",n)}})),t.on("clearAllHtmlTag",(function(t){r.clearHtml(t)})),t.on("setInPageHtml",(function(t){r.addElementInPage(t)})),t.on("removeElemInPageHtml",(function(t){r.removeCardInPage(t)})),t.on("animateFavouriteElement",(function(t){r.animateFavouriteElement(t)})),t.on("updateFavouritesInput",(function(t){r.updateFavouritesInput(t)})),t.on("updateCountFavourites",(function(t){return r.updateCountFavourites(t)})),t.on("updateViewAmount",(function(t){r.viewAmountFavourites(t)})),r}return x()(n,[{key:"removeCardInPage",value:function(t){document.querySelector('.js-s3d-fv .js-s3d-card[data-id="'.concat(t,'"]')).remove()}},{key:"clearHtml",value:function(t){d()(t).remove()}},{key:"addElementInPage",value:function(t){var e;(e=d()(".js-s3d-fv__list")).append.apply(e,D()(t))}},{key:"updateFavouritesInput",value:function(t){document.querySelectorAll(".js-s3d-add__favourite input:checked").forEach((function(e){var n=e.closest("[data-id]"),a=parseInt(n.getAttribute("data-id"));t.includes(a)||(e.checked=!1)})),t.forEach((function(t){D()(document.querySelectorAll("".concat(".js-s3d-add__favourite","[data-id='").concat(t,"']"))).forEach((function(t){t.querySelector("input").checked=!0}))}))}},{key:"updateCountFavourites",value:function(t){this.updateCount(t),this.updateCountWithText(t)}},{key:"updateCount",value:function(t){document.querySelectorAll(".js-s3d__favourite-count").forEach((function(e){e.innerHTML=t,e.setAttribute("data-count",t)}))}},{key:"updateCountWithText",value:function(t){document.querySelector(".js-s3d__fv-count").innerHTML=this.i18n.t("favourite--added",{apartments:t})}},{key:"viewAmountFavourites",value:function(t){t?(d()(".js-s3d-favorite__wrap").removeClass("s3d-hidden"),d()(".js-s3d-ctr__favourites-bg").addClass("s3d-show")):(d()(".js-s3d-favorite__wrap").addClass("s3d-hidden"),d()(".js-s3d-ctr__favourites-bg").removeClass("s3d-show"))}}]),n}(K);function re(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function ie(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?re(Object(n),!0).forEach((function(e){P()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var se=function(t){M()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=U()(t);if(e){var o=U()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return W()(this,n)}}(n);function n(t,a){var o;return k()(this,n),o=e.call(this),P()(R()(o),"mappingConfiguration",{isFilterShow:function(t){return o.emit("changeClass",{target:".js-s3d-filter",flag:t,changeClass:"s3d-show"})},isFilterTransition:function(t){return o.emit("changeClass",{target:".js-s3d-filter",flag:t,changeClass:"active-filter"})},controllerFilter:function(t){return o.emit("changeClass",{target:".js-s3d-ctr__filter",flag:t,changeClass:"s3d-show"})},controllerTitle:function(t){return o.emit("changeClass",{target:".js-s3d-ctr__title",flag:t,changeClass:"s3d-show"})},controllerPhone:function(t){return o.emit("changeClass",{target:".js-s3d-ctr__call",flag:t,changeClass:"s3d-show"})},controllerCompass:function(t){return o.emit("changeClass",{target:".js-s3d-ctr__compass",flag:t,changeClass:"s3d-show"})},controllerTabs:function(t){return o.emit("changeClass",{target:".js-s3d-ctr__elem",flag:t,changeClass:"s3d-show"})},controllerHelper:function(t){return o.emit("changeClass",{target:".js-s3d-ctr__helper",flag:t,changeClass:"s3d-show"})},controllerInfoBox:function(t){return o.emit("changeClass",{target:".js-s3d-infoBox",flag:t,changeClass:"s3d-show"})},controllerFavourite:function(t){return o.emit("changeClass",{target:".s3d-ctr__favourites",flag:t,changeClass:"s3d-show"})},controllerInfrastructure:function(t){return o.emit("changeClass",{target:".js-s3d-ctr__infra",flag:t,changeClass:"s3d-show"})},controllerBack:function(t){return o.emit("changeClass",{target:".js-s3d__back",flag:t,changeClass:"s3d-show"})},controllerChoose:function(t){return o.emit("changeClass",{target:".js-s3d__choose--flat",flag:t,changeClass:"s3d-show"})},preloaderMini:function(t){return o.emit("changeClass",{target:".js-fs-preloader-before",flag:t,changeClass:"s3d-show"})}}),o.config=t,o.i18n=a,o.preloader=B,o.preloaderWithoutPercent=I(),o.defaultFlybySettings={},o.getFlat=o.getFlat.bind(R()(o)),o.getFloor=o.getFloor.bind(R()(o)),o.updateFsm=o.updateFsm.bind(R()(o)),o.checkNextFlyby=o.checkNextFlyby.bind(R()(o)),o.changePopupFlyby=o.changePopupFlyby.bind(R()(o)),o.browser=t.browser,o.typeSelectedFlyby$=new V.a("flat"),o.compass=o.compass.bind(R()(o)),o.currentFilteredFlatIds$=new V.a([]),o.currentFilteredFloorsData$=new V.a([]),o.hoverData$=new V.a({}),o.flatList={},o.floorList$=new V.a({}),o.favouritesIds$=new V.a([]),o.fsmConfig={genplan:{desktop:{isFilterShow:!1,isFilterTransition:!1,controllerFilter:!1,controllerTitle:!0,controllerPhone:!0,controllerCompass:!0,controllerTabs:!0,controllerHelper:!0,controllerInfoBox:!0,controllerFavourite:!0,controllerInfrastructure:!0,controllerBack:!1,controllerChoose:!1,preloaderMini:!0},mobile:{isFilterShow:!1,isFilterTransition:!1,controllerFilter:!1,controllerTitle:!0,controllerPhone:!0,controllerCompass:!0,controllerTabs:!0,controllerHelper:!0,controllerInfoBox:!0,controllerFavourite:!0,controllerInfrastructure:!0,controllerBack:!1,controllerChoose:!1,preloaderMini:!0}},flyby:{desktop:{isFilterShow:!0,isFilterTransition:!0,controllerFilter:!0,controllerTitle:!0,controllerPhone:!0,controllerCompass:!0,controllerTabs:!0,controllerHelper:!0,controllerInfoBox:!0,controllerFavourite:!0,controllerInfrastructure:!0,controllerBack:!1,controllerChoose:!0,preloaderMini:!0},mobile:{isFilterShow:!0,isFilterTransition:!0,controllerFilter:!0,controllerTitle:!0,controllerPhone:!0,controllerCompass:!0,controllerTabs:!0,controllerHelper:!0,controllerInfoBox:!0,controllerFavourite:!0,controllerInfrastructure:!0,controllerBack:!1,controllerChoose:!0,preloaderMini:!0}},plannings:{desktop:{wrap:"plannings",isFilterShow:!0,isFilterTransition:!1,controllerFilter:!1,controllerTitle:!1,controllerPhone:!0,controllerCompass:!1,controllerTabs:!0,controllerHelper:!1,controllerInfoBox:!1,controllerFavourite:!0,controllerInfrastructure:!1,controllerBack:!0,controllerChoose:!1,preloaderMini:!1},mobile:{wrap:"plannings",isFilterShow:!0,isFilterTransition:!0,controllerFilter:!0,controllerTitle:!1,controllerPhone:!0,controllerCompass:!1,controllerTabs:!0,controllerHelper:!1,controllerInfoBox:!1,controllerFavourite:!0,controllerInfrastructure:!1,controllerBack:!1,controllerChoose:!1,preloaderMini:!1}},floor:{desktop:{wrap:"floor",isFilterShow:!1,controllerFilter:!1,controllerTitle:!1,controllerPhone:!0,controllerCompass:!1,controllerTabs:!0,controllerHelper:!1,controllerInfoBox:!1,controllerFavourite:!1,controllerInfrastructure:!1,controllerBack:!0,controllerChoose:!1,preloaderMini:!1},mobile:{wrap:"floor",isFilterShow:!1,controllerFilter:!1,controllerTitle:!1,controllerPhone:!0,controllerCompass:!1,controllerTabs:!0,controllerHelper:!1,controllerInfoBox:!1,controllerFavourite:!1,controllerInfrastructure:!1,controllerBack:!1,controllerChoose:!1,preloaderMini:!1}},flat:{desktop:{wrap:"flat",isFilterShow:!1,controllerFilter:!1,controllerTitle:!1,controllerPhone:!0,controllerCompass:!1,controllerTabs:!0,controllerHelper:!1,controllerInfoBox:!1,controllerFavourite:!1,controllerInfrastructure:!1,controllerBack:!0,controllerChoose:!1,preloaderMini:!1},mobile:{wrap:"flat",isFilterShow:!1,controllerFilter:!1,controllerTitle:!1,controllerPhone:!0,controllerCompass:!1,controllerTabs:!0,controllerHelper:!1,controllerInfoBox:!1,controllerFavourite:!1,controllerInfrastructure:!1,controllerBack:!1,controllerChoose:!1,preloaderMini:!1}},favourites:{desktop:{wrap:"favourites",isFilterShow:!1,controllerFilter:!1,controllerTitle:!1,controllerPhone:!0,controllerCompass:!1,controllerTabs:!0,controllerHelper:!1,controllerInfoBox:!1,controllerFavourite:!1,controllerInfrastructure:!1,controllerBack:!0,controllerChoose:!1,preloaderMini:!1},mobile:{wrap:"favourites",isFilterShow:!1,controllerFilter:!1,controllerTitle:!1,controllerPhone:!0,controllerCompass:!1,controllerTabs:!0,controllerHelper:!1,controllerInfoBox:!1,controllerFavourite:!1,controllerInfrastructure:!1,controllerBack:!1,controllerChoose:!1,preloaderMini:!1}}},o.fsm={firstLoad:!0,state:"",settings:{},transitions:{genplan:function(t,e,n){if(this[t.id])n?(this.preloaderWithoutPercent.show(),this.preloaderWithoutPercent.hide(),this[t.id].toSlideNum(t.flatId,t.settings.slides)):(this.preloaderWithoutPercent.show(),this.preloaderWithoutPercent.hide(),this[t.id].showDifferentPointWithoutRotate(t.settings.slides,t.flatId));else{this.preloader.show(),t.typeCreateBlock="canvas",this.emit("createWrapper",t),t.wrapper=d()(".js-s3d__wrapper__".concat(t.id));var a=new X(t,e),o=new Y(a,{wrapper:t.wrapper,wrapperEvent:".js-s3d__svgWrap"});new Q(a,o),this[t.id]=a,a.init(),Object(z.has)(this,"helper")&&this.helper.init()}this.changeViewBlock(t.id),this.compass(this[t.id].currentCompassDeg),this.iteratingConfig()},flyby:function(t,e,n){if(this[t.id])n?(this.preloaderWithoutPercent.show(),this.preloaderWithoutPercent.hide(),this[t.id].toSlideNum(t.flatId,t.settings.slides)):(this.preloaderWithoutPercent.show(),this.preloaderWithoutPercent.hide(),this[t.id].showDifferentPointWithoutRotate(t.settings.slides,t.flatId));else{this.preloader.show(),t.typeCreateBlock="canvas",this.emit("createWrapper",t),t.wrapper=d()(".js-s3d__wrapper__".concat(t.id));var a=new X(t,e),o=new Y(a,{wrapper:t.wrapper,wrapperEvent:".js-s3d__svgWrap"});new Q(a,o),a.init(t.flatId,t.settings.slides),this[t.id]=a,Object(z.has)(this,"helper")&&this.helper.init()}this.changeViewBlock(t.id),this.compass(this[t.id].currentCompassDeg),this.iteratingConfig()},plannings:function(t,e){this.plannings?(this.preloaderWithoutPercent.show(),this.preloaderWithoutPercent.hide()):(this.preloaderWithoutPercent.show(),this.plannings=new nt(t,e),this.plannings.init()),this.filter&&this.filter.reduceFilter(!1),this.changeViewBlock(this.fsm.state),this.iteratingConfig()},flat:function(t,e){if(this.flat)this.preloaderWithoutPercent.show(),this.preloaderWithoutPercent.hide();else{this.preloader.show(),t.typeCreateBlock="div";var n=new _t(t,e),a=new bt(n,{},e);new mt(n,a),this.flat=n,n.init(t);var o=d()('.s3d-nav__btn[data-type="flat"]');this.preloader.turnOff(o)}this.changeViewBlock(this.fsm.state),this.compass(this.flat.currentCompassDeg),this.iteratingConfig(),this.flat.update(t.flatId)},floor:function(t,e){if(this.floor)this.preloaderWithoutPercent.show(),this.preloaderWithoutPercent.hide(),this.floor.update(t.settings);else{this.preloaderWithoutPercent.show(),t.typeCreateBlock="div";var n=new jt(t,e),a=new Pt(n,{});new St(n,a),this.floor=n,n.init(t);var o=d()('.s3d-nav__btn[data-type="floor"]');this.preloader.turnOff(o)}this.changeViewBlock(this.fsm.state),this.compass(this.floor.currentCompassDeg),this.iteratingConfig()},favourites:function(){var t=this;this.fsm.firstLoad?(this.preloader.show(),this.fsm.firstLoad=!1):this.preloaderWithoutPercent.show(),this.favourites.update(),this.iteratingConfig(),this.changeViewBlock(this.fsm.state),this.preloader.checkState().showing?setTimeout((function(){t.preloader.hide()}),500):this.preloaderWithoutPercent.hide()}},dispatch:function(t,e,n,a){t.type===this.state&&+t.flyby===this.settings.flyby&&t.side===this.settings.side||(this.state=t.type,this.settings=t);var o=this.transitions[this.state];if(o){var r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ct(Object(n),!0).forEach((function(e){P()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},n);r.settings=t,r.type=this.state,o.call(e,r,a,t.change)}}},o}return x()(n,[{key:"activeFlat",get:function(){return this._activeFlat},set:function(t){this._activeFlat=window.parseInt(t)}},{key:"convertType",value:function(t){try{return new Function("return ".concat(t," ;"))()}catch(e){return t}}},{key:"selectSlideHandler",value:function(t){var e=t.currentTarget.dataset,n=e.type,a=e.flyby,o=e.side,r=e.id;!n||n===this.fsm.state&&a===this.fsm.settings.flyby&&o===this.fsm.settings.side||this.updateFsm({type:n,flyby:a,side:o,id:r})}},{key:"getFlat",value:function(t){return t?this.flatList[t]:this.flatList}},{key:"getFloor",value:function(t){var e=this.floorList$.value,n=t.floor,a=t.section,o=t.build;return n&&o?e.find((function(t){return t.floor===+n&&t.build===+o&&t.section===+a})):e}},{key:"init",value:function(){var t=i()(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.history=new Ot({updateFsm:this.updateFsm}),this.preloader.show(),e="".concat(defaultStaticPath,"/grand-burge-flats.json"),"prod"!==status&&"dev"!==status||(e="/wp-admin/admin-ajax.php"),this.infoBox=new Nt({activeFlat:this.activeFlat,updateFsm:this.updateFsm,getFlat:this.getFlat,getFloor:this.getFloor,hoverData$:this.hoverData$,typeSelectedFlyby$:this.typeSelectedFlyby$,i18n:this.i18n}),t.next=8,this.requestGetFlats(e);case 8:return n=t.sent,this.setDefaultConfigFlyby(this.config),this.helper=new At(this.i18n),t.next=13,this.flatJsonIsLoaded(n.data);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0);case 18:case"end":return t.stop()}}),t,this,[[0,15]])})));return function(){return t.apply(this,arguments)}}()},{key:"setDefaultConfigFlyby",value:function(t){if(t.genplan)this.defaultFlybySettings=this.getParamGenplan();else{var e=t.flyby,n=Object.keys(e)[0],a=Object.keys(e[n])[0];this.defaultFlybySettings={type:"flyby",flyby:n,side:a}}}},{key:"parseUrl",value:function(){var t=new URL(decodeURIComponent(window.location)).searchParams;return Object.fromEntries(t.entries())}},{key:"getStructureFlats",value:function(){return lt({url:"".concat(defaultStaticPath,"/structureFlats.json")})}},{key:"parseParam",value:function(t,e){return Object(z.has)(t,e)?P()({},e,JSON.parse(t[e])):{}}},{key:"getParamDefault",value:function(){return this.defaultFlybySettings}},{key:"getParamFlyby",value:function(t){var e,n,a,o=ie(ie({},this.parseParam(t,"favourites")),{},{type:null!==(e=t.type)&&void 0!==e?e:"flyby",flyby:null!==(n=t.flyby)&&void 0!==n?n:"1",side:null!==(a=t.side)&&void 0!==a?a:"outside"}),r=this.checkNextFlyby(o,t.id),i=t.id,s=i&&this.getFlat(i)?{id:t.id}:{};return ie(ie(ie({},o),r),s)}},{key:"getParamGenplan",value:function(){return{type:"genplan"}}},{key:"getParamFloor",value:function(t){var e=this.floorList$.value,n=this.convertType(t.build)||e[0].build,a=this.convertType(t.floor)||e[0].floor,o=this.convertType(t.section)||e[0].section;return ie(ie({},this.parseParam(t,"favourites")),{},{type:"floor",build:n,floor:a,section:o})}},{key:"getParamFlat",value:function(t){return t.id?ie(ie({},this.parseParam(t,"favourites")),{},{type:"flat",id:t.id}):this.getParamDefault(t)}},{key:"getParamFavourites",value:function(t){return ie(ie({},this.parseParam(t,"favourites")),{},{type:"favourites"})}},{key:"getParamPlannings",value:function(t){return ie(ie({},this.parseParam(t,"favourites")),{},{type:"plannings"})}},{key:"getParams",value:function(t){var e;return this[null!==(e={genplan:"getParamGenplan",flyby:"getParamFlyby",plannings:"getParamPlannings",floor:"getParamFloor",flat:"getParamFlat",favourites:"getParamFavourites"}[t.type])&&void 0!==e?e:"getParamDefault"](t)}},{key:"checkFlatInSVG",value:function(t,e){var n={};for(var a in t)for(var o in t[a]){var r=t[a][o];for(var i in r)for(var s in r[i]){var l=r[i][s].includes(+e);l&&!Object(z.has)(n,[a])&&(n[a]={}),l&&!Object(z.has)(n,[a,o])&&(n[a][o]=[]),l&&n[a][o].push(+i)}}return n}},{key:"prepareFlats",value:function(t){return t.reduce((function(t,e){var n=Object(z.transform)(e,(function(t,e,n){var a=+e,o=t;return Object(z.isNaN)(a)||"sorts"===n?o[n]=e:o[n]=a,o})),a=n.id;return ie(ie({},t),{},P()({},a,n))}),{})}},{key:"flatJsonIsLoaded",value:function(){var t=i()(l.a.mark((function t(e){var n,a,o,r,i,s,c,d;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.flatList=this.prepareFlats(e),this.floorList$.next(this.createFloorsData(e)),n=Object.keys(this.flatList),this.currentFilteredFlatIds$.next(n),a={getFlat:this.getFlat,updateFsm:this.updateFsm,fsm:this.fsm,typeSelectedFlyby$:this.typeSelectedFlyby$,currentFilteredFlatIds$:this.currentFilteredFlatIds$,currentFilteredFloorsData$:this.currentFilteredFloorsData$,activeFlat:this.activeFlat,favouritesIds$:this.favouritesIds$,history:this.history},o=new zt({flats:this.getFlat(),currentFilteredFlatIds$:this.currentFilteredFlatIds$,currentFilteredFloorsData$:this.currentFilteredFloorsData$,typeSelectedFlyby$:this.typeSelectedFlyby$},this.i18n),r=new Kt(o,{}),new Gt(o,r),this.filter=o,o.init(),new Xt(this,this.filter),this.popupChangeFlyby=new te(this,this.i18n),i=new ne(a,this.i18n),s=new oe(i,{},this.i18n),new ae(i,s),this.favourites=i,this.favourites.init(),t.next=19,this.getStructureFlats();case 19:c=t.sent,this.structureFlats=c.data,d=this.parseUrl(),this.updateFsm(d),rt("[data-choose-type]",".js-s3d__choose--flat--button-svg");case 24:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"createStructureSvg",value:function(){var t=["floor","flat"],e={},n=this.config.flyby,a=function(a){e[a]={};var o=function(o){var r=n[a][o];e[a][o]={},r.controlPoint.forEach((function(n){e[a][o][n]={},t.forEach((function(t){e[a][o][n][t]=[],d.a.ajax("/wp-content/themes/".concat(nameProject,"/assets/s3d/images/svg/").concat(t,"/flyby/").concat(a,"/").concat(o,"/").concat(n,".svg")).then((function(r){var i=D()(r.querySelectorAll("polygon")).map((function(t){return+t.dataset.id})).filter((function(t){return t}));e[a][o][n][t]=i}))}))}))};for(var r in n[a])o(r)};for(var o in n)a(o);setTimeout((function(){console.log(JSON.stringify(e))}),1e4)}},{key:"changePopupFlyby",value:function(t,e){this.popupChangeFlyby.updateContent(e),this.popupChangeFlyby.openPopup(t)}},{key:"compass",value:function(t){this.emit("updateCompassRotate",t)}},{key:"updateHistory",value:function(t){return!(!this.history||!this.history.update||(this.history.update(t),0))}},{key:"changeViewBlock",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,n=this;setTimeout((function(){n.emit("changeBlockActive",t)}),e)}},{key:"requestGetFlats",value:function(t){var e="prod"===status||"dev"===status?"post":"get";return lt({url:t,method:e,data:{action:"getFlats"}})}},{key:"createFloorsData",value:function(t){return t.reduce((function(t,e){var n=t.findIndex((function(t){return+t.floor==+e.floor&&+t.build==+e.build&&+t.section==+e.section}));if(n>=0){var a=t[n].free,o=Object(z.cloneDeep)(t[n]);return o.count+=1,o.free="1"===e.sale?a+1:a,o.flatsIds.push(+e.id),t[n]=o,t}return[].concat(D()(t),[{floor:+e.floor,build:+e.build,section:+e.section,count:1,flatsIds:[+e.id],free:+("1"===e.sale)}])}),[])}},{key:"changeChooseActive",value:function(t){this.typeSelectedFlyby$.next(t)}},{key:"updateFsm",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getParams(t),a=n.type,o=n.flyby,r=n.side,i=n.id,s=Object(z.has)(this.config,[a,o,r])?this.config[a][o][r]:this.config[a];a===this.fsm.state&&"flyby"!==this.fsm.state||(i&&(this.activeFlat=+i,s.flatId=+i),e&&this.updateHistory(n),s.type=t.type,s.activeFlat=this.activeFlat,s.hoverData$=this.hoverData$,s.compass=this.compass,s.updateFsm=this.updateFsm,s.history=this.history,s.getFlat=this.getFlat,s.typeSelectedFlyby$=this.typeSelectedFlyby$,s.currentFilteredFlatIds$=this.currentFilteredFlatIds$,s.currentFilteredFloorsData$=this.currentFilteredFloorsData$,s.infoBox=this.infoBox,s.floorList$=this.floorList$,s.browser=this.browser,s.favouritesIds$=this.favouritesIds$,this.fsm.dispatch(n,this,s,this.i18n))}},{key:"iteratingConfig",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400,n=document.documentElement.offsetWidth>992?"desktop":"mobile",a=this.fsmConfig[this.fsm.state][n],o=Object.keys(a);setTimeout((function(){return o.forEach((function(e){t.mappingConfiguration[e]&&t.mappingConfiguration[e](a[e])}))}),e)}},{key:"checkNextFlyby",value:function(t,e){if(void 0===e)return null;var n=this.checkFlatInSVG(this.structureFlats,e),a=this.fsm.settings;if(0===Object(z.size)(n))return console.warn("flat are not found in svg  id №:",e),null;if(Object(z.has)(n,[t.flyby,t.side]))return{type:"flyby",flyby:t.flyby,side:t.side,slides:n[t.flyby][t.side],change:!1};if(_.has(n,[a.flyby,a.side]))return{type:"flyby",flyby:a.flyby,side:a.side,method:"search",slide:n[a.flyby][a.side],change:!1};var o=Object.keys(n),r=Object.keys(n[o[0]]),i=n[o[0]][r[0]],s=!1;return"flyby"===a.type&&a.flyby===o&&a.side===r||(s=!0),{type:"flyby",flyby:o[0],side:r[0],slides:i,change:s}}}]),n}(K);var le=function(t){M()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=U()(t);if(e){var o=U()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return W()(this,n)}}(n);function n(t,a){var o;return k()(this,n),(o=e.call(this))._model=t,o._elements=a,a.switch.on("click",(function(t){t.target.classList.contains("active")||t.target.hasAttribute("disabled")||o.emit("chooseSlider",t)})),document.querySelector(".js-s3d__back").addEventListener("click",(function(){o.emit("clickBackHandler")})),a.choose.on("change",(function(t){var e=t.currentTarget.dataset.chooseType;o.emit("chooseHandler",e),o.chooseRender(e)})),window.addEventListener("resize",(function(){o.emit("resize")})),o.chooseRender(o._model.typeSelectedFlyby$.value),t.on("createWrapper",(function(t){o.createWrap(t)})),t.on("changeBlockActive",(function(t){o.changeBlockIndex(t),o.changeActiveButton(t)})),t.on("changeClass",(function(t){o.changeClass(t)})),t.on("animateChangeBlock",(function(){o.animateBlock()})),t.on("updateCompassRotate",(function(t){o.updateCompass(t)})),o}return x()(n,[{key:"showAvailableFlat",value:function(t){t?d()(".js-s3d-svg__point-group").css({opacity:"1",display:"flex"}):d()(".js-s3d-svg__point-group").css({opacity:"0",display:"none"})}},{key:"chooseRender",value:function(t){document.querySelectorAll("[data-choose-type]").forEach((function(e){e.dataset.selectedType!==t?e.classList.remove("active"):e.classList.add("active")}))}},{key:"checkAvailableFlat",value:function(){var t=d()(".js-s3d-ctr__showFilter--input"),e=t.prop("checked");t.prop("checked",e),this.showAvailableFlat(!e)}},{key:"createWrap",value:function(t){var e=createMarkup("div",{class:"s3d__wrap js-s3d__wrapper__".concat(t.id," s3d__wrapper__").concat(t.type)}),n=createMarkup("div",{class:"js-s3d__wrapper__canvas",style:"position:relative;"}),a=createMarkup(t.typeCreateBlock,{id:"js-s3d__".concat(t.id)});d()(t.generalWrapId).append(e),e.append(n),n.append(a)}},{key:"changeBlockIndex",value:function(t){d()(".s3d__wrap").css("z-index",""),d()(".js-s3d__wrapper__".concat(t)).css("z-index","100"),d()(".js-s3d-ctr")[0].dataset.type=t;var e=document.querySelector(".js-s3d-filter");e.setAttribute("data-type",t),e.classList.remove("s3d-filter__scroll-active")}},{key:"changeActiveButton",value:function(t){var e=document.querySelector(".s3d-ctr__option");if(d()(".js-s3d-ctr__elem .active").removeClass("active"),t.includes("flyby")){var n=this._model.fsm.settings,a=n.type,o=n.flyby,r=n.side;d()(".js-s3d-nav__btn[data-type=".concat(a,"][data-flyby=").concat(o,"][data-side=").concat(r,"]")).addClass("active")}else d()(".js-s3d-nav__btn[data-type=".concat(t,"]")).addClass("active");if("genplan"===t||t.includes("flyby")){e.classList.add("active");var i=this._model.i18n.t("ctr.nav.".concat(t));document.querySelector(".js-s3d-ctr__option__text").innerHTML=i}}},{key:"changeClass",value:function(t){var e=t.flag?"add":"remove",n=document.querySelector(t.target);n&&n.classList[e](t.changeClass)}},{key:"animateBlock",value:function(){var t=document.querySelectorAll(".translate-layer");t[0].classList.remove("translate-layer__down","translate-layer__up","active"),t[0].classList.add("translate-layer__down"),setTimeout((function(){return t[0].classList.add("active")}),100)}},{key:"updateCompass",value:function(t){d()(".s3d-ctr__compass svg").css("transform","rotate(-".concat(t,"deg)"))}}]),n}(K);document.addEventListener("DOMContentLoaded",(function(t){!function(){de.apply(this,arguments)}()})),window.nameProject="grand-byrze",window.defaultProjectPath="/wp-content/themes/".concat(window.nameProject),window.defaultModulePath="/wp-content/themes/".concat(window.nameProject,"/assets/s3d"),window.defaultStaticPath="/wp-content/themes/".concat(window.nameProject,"/static"),window.status=window.location.href.match(/localhost/)?"local":"dev";var ce=function(t){var e=function(t){return'<div class="s3d-ctr js-s3d-ctr unselectable" data-type="complex">\n    <div class="s3d-ctr__filter js-s3d-ctr__filter">\n      <div class="s3d-ctr__filter__icon">\n        <svg width="26" height="21" viewBox="0 0 26 21" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <line y1="2.5" x2="26" y2="2.5" stroke="#2D2D2D"></line>\n          <line y1="18.5" x2="26" y2="18.5" stroke="#2D2D2D"></line>\n          <line y1="10.5" x2="26" y2="10.5" stroke="#2D2D2D"></line>\n          <circle cx="20.5" cy="2.5" r="2" fill="#F3EFE9" stroke="#2D2D2D"></circle>\n          <circle cx="20.5" cy="18.5" r="2" fill="#F3EFE9" stroke="#2D2D2D"></circle>\n          <circle cx="5.5" cy="10.5" r="2" fill="#F3EFE9" stroke="#2D2D2D"></circle>\n        </svg>\n      </div>\n      <span class="s3d-ctr__filter__text">'.concat(t.t("ctr.filterBtn"),'</span>\n    </div>\n    <div class="s3d__compass s3d-ctr__compass js-s3d-ctr__compass">\n      <svg class="icon--Compass" role="presentation">\n        <use xlink:href="#icon-Compass"></use>\n      </svg>\n    </div>\n    <div class="s3d-ctr__nav js-s3d-ctr__elem">\n      <div class="s3d-ctr__nav__title">').concat(t.t("ctr.nav.title"),'</div>\n      <div class="s3d-nav__btn s3d-ctr__option">\n        <div class="s3d-ctr__option__title">').concat(t.t("ctr.nav.flyby--name"),'</div>\n        <div class="s3d-ctr__option__text js-s3d-ctr__option__text"></div>\n        <div class="s3d-ctr__option__buttons">\n          <button class="s3d-nav__btn js-s3d-nav__btn active" data-type="genplan">').concat(t.t("ctr.nav.genplan"),'</button>\n          <button class="s3d-nav__btn js-s3d-nav__btn" data-type="flyby" data-flyby="1" data-side="outside">').concat(t.t("ctr.nav.flyby_1_outside"),'</button>\n          <button class="s3d-nav__btn js-s3d-nav__btn" data-type="flyby" data-flyby="2" data-side="outside">').concat(t.t("ctr.nav.flyby_2_outside"),'</button>\n        </div>\n      </div>\n      <button class="s3d-nav__btn js-s3d-nav__btn" type="button" data-type="plannings">\n        ').concat(t.t("ctr.nav.plannings"),'\n      </button>\n      <button class="s3d-nav__btn js-s3d-nav__btn" type="button" data-type="floor" disabled>').concat(t.t("ctr.nav.floor"),'</button>\n      <button class="s3d-nav__btn js-s3d-nav__btn" type="button" data-type="flat" disabled>').concat(t.t("ctr.nav.flat"),'</button>\n    </div>\n    <div class="s3d-ctr__title js-s3d-ctr__title">').concat(t.t("ctr.title"),'</div>\n    <div class="s3d__choose--flat js-s3d__choose--flat">\n        <div class="s3d__choose--flat--button-bg js-s3d__choose--flat--button-svg"><svg viewBox="0 0 145 44" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">\n          <path d="M0 22C0 9.84974 9.84973 0 22 0H123C135.15 0 145 9.84974 145 22C145 34.1503 135.15 44 123 44H22C9.84974 44 0 34.1503 0 22Z"/>\n        </svg></div>\n        <label class="s3d__choose--flat--button" data-choose-type="flat">\n      <input type="radio" name="chooseFlat" checked value=\'flat\'/>\n    <span>').concat(t.t("ctr.chooseOfApartment"),'</span></label>\n        <label class="s3d__choose--flat--button" data-choose-type="floor">\n      <input type="radio" name="chooseFlat" value=\'floor\'/>\n    <span>').concat(t.t("ctr.chooseOfFloor"),'</span></label>\n</div>\n    <div class="js-s3d-infoBox s3d-infoBox" data-s3d-type="infoBox"></div>\n    <button class="s3d-ctr__helper js-s3d-ctr__helper">\n      <div class="s3d-ctr__helper--text">').concat(t.t("ctr.repeatHelp"),"</div>\n    </button>\n  </div>")}(t),n=function(t){return'<div class="js-s3d__wrapper__plannings s3d__wrap s3d__wrapper__plannings" id="js-s3d__plannings">\n    <div class="s3d-pl">\n      <div class="s3d-pl__container">\n        <div class="s3d-pl__title">'.concat(t.t("plannings--title"),'</div>\n        <div class="s3d-pl__amount-flat">').concat(t.t("found"),'<span class="s3d-pl__amount-flat__num js-s3d__amount-flat__num"></span>').concat(t.t("found--from"),'<span class="s3d-pl__amount-flat__num js-s3d__amount-flat__num-all"></span></div>\n        <div class="s3d-pl__not-found js-s3d-pl__not-found">').concat(t.t("notFound"),'</div>\n        <div class="s3d-pl__list js-s3d-pl__list"></div>\n      </div>\n    </div>\n  </div>')}(t),a=function(t,e){return'<div class="js-s3d__wrapper__favourites s3d__wrap" id="js-s3d__favourites">\n    <div class="s3d-fv js-s3d-fv">\n      <div class="s3d-fv__bg">\n        <img class="s3d-fv__img" src="/wp-content/themes/'.concat(nameProject,'/assets/s3d/images/favourite-bg.jpg">\n      </div>\n      <div class="s3d-fv__container">\n        <div class="s3d-fv__title">').concat(t.t("favourite--title"),'</div>\n        <div class="s3d-fv__amount-flat js-s3d__fv-count">').concat(e," ").concat(t.t("favourite--added",{apartments:e}),'</div>\n        <div class="s3d-fv__list js-s3d-fv__list"></div>\n      </div>\n    </div>\n  </div>')}(t,0),o=function(t){return'\n  <div class="s3d-filter-wrap js-s3d-filter">\n    <div class="s3d-filter__close-wrap js-s3d-filter__close">\n      <div class="s3d-filter__close"><span></span><span></span></div>\n    </div>\n    <div class="s3d-filter__top">\n      <div class="s3d-filter__title"><span>'.concat(t.t("Filter.title"),'</span></div>\n      <div class="s3d-filter">\n        <div class="s3d-filter__row">\n          <div class="s3d-filter__row__title">').concat(t.t("floor"),'</div>\n          <div class="s3d-filter__row__list js-filter-range">\n            \x3c!--label з--\x3e\n            \x3c!--    input.js-s3d-filter__floor__min--input(type="number" data-type="floor"  data-border="min")--\x3e\n            <input class="js-s3d-filter__floor--input" data-type="floor" data-min="1" data-max="15" data-from="1" data-to="15">\n            \x3c!--label по--\x3e\n            \x3c!--    input.js-s3d-filter__floor__max--input(type="number" data-type="floor"  data-border="max")--\x3e\n          </div>\n        </div>\n        <div class="s3d-filter__row">\n          <div class="s3d-filter__row__title">').concat(t.t("area"),' м<sup>2</sup></div>\n          <div class="s3d-filter__row__list js-filter-range">\n            \x3c!--label з--\x3e\n            \x3c!--    input.js-s3d-filter__area__min--input( type="number" data-type="area" data-border="min")--\x3e\n            <input class="js-s3d-filter__area--input" data-type="area" data-min="5" data-max="555" data-from="5" data-to="555">\n            \x3c!--label по--\x3e\n            \x3c!--    input.js-s3d-filter__area__max--input(type="number" data-type="area" data-border="max")--\x3e\n          </div>\n        </div>\n        <div class="s3d-filter__row js-s3d-filter__checkboxes">\n          <div class="s3d-filter__checkbox s3d-filter__checkbox--label-wide">\n            <input type="checkbox" data-type="sale" data-sale="1" id="sale-3">\n            <label class="s3d-filter__checkbox--label" for="sale-3">').concat(t.t("Filter.free"),'</label>\n          </div>\n        </div>\n        <div class="s3d-filter__row s3d-filter__offset-bottom-none js-s3d-filter__checkboxes">\n          \x3c!--.s3d-filter-select__title Кімнат--\x3e\n          <div class="s3d-filter-checkboxes">\n            <div class="s3d-filter__checkbox">\n              <input type="checkbox" data-type="rooms" data-rooms="1" id="rooms-1">\n              <label class="s3d-filter__checkbox--label" for="rooms-1">1к</label>\n            </div>\n            <div class="s3d-filter__checkbox">\n              <input type="checkbox" data-type="rooms" data-rooms="2" id="rooms-2">\n              <label class="s3d-filter__checkbox--label" for="rooms-2">2к</label>\n            </div>\n            <div class="s3d-filter__checkbox">\n              <input type="checkbox" data-type="rooms" data-rooms="3" id="rooms-3">\n              <label class="s3d-filter__checkbox--label" for="rooms-3">3к</label>\n            </div>\n            <div class="s3d-filter__checkbox">\n              <input type="checkbox" data-type="rooms" data-rooms="4" id="rooms-4">\n              <label class="s3d-filter__checkbox--label" for="rooms-4">4к</label>\n            </div>\n          </div>\n          <button class="s3d-filter__reset s3d-filter__reset-desktop" type="button" id="resetFilter">\n            <svg class="s3d-filter__reset-icon" role="presentation">\n              <use xlink:href="#icon-reset"></use>\n            </svg>\n            <span>').concat(t.t("Filter.reset"),'</span>\n          </button>\n        </div>\n        <div class="s3d-filter__row s3d-filter__offset-bottom-none">\n          <button class="s3d-filter__reset s3d-filter__reset-mobile" type="button" id="resetFilter-mobile">\n            <svg class="s3d-filter__reset-icon" role="presentation">\n              <use xlink:href="#icon-reset"></use>\n            </svg>\n            <span>').concat(t.t("Filter.reset"),'</span>\n          </button>\n          <button class="s3d-filter__apply js-s3d-filter__button--apply" type="button">\n            <span>').concat(t.t("Filter.apply"),'</span>\n          </button>\n        </div>\n      </div>\n      <div class="s3d-filter__mini-info js-s3d-filter__mini-info">\n      <div class="s3d-filter__mini-info__elem s3d-filter__mini-info__floor" data-type="floor">\n        <div class="s3d-filter__mini-info__title">').concat(t.t("floor"),':</div>\n        <div class="s3d-filter__mini-info__amount s3d-filter__mini-info__amount">\n          <span>').concat(t.t("Filter.from"),'</span>\n          <span class="js-s3d-filter__mini-info__floor--amount-from" data-type="min">0</span>\n          <span>').concat(t.t("Filter.to"),'</span>\n          <span class="js-s3d-filter__mini-info__floor--amount-to" data-type="max">50</span>\n        </div>\n      </div>\n      <div class="s3d-filter__mini-info__elem s3d-filter__mini-info__area" data-type="area">\n        <div class="s3d-filter__mini-info__title">').concat(t.t("area"),' м2:</div>\n        <div class="s3d-filter__mini-info__amount s3d-filter__mini-info__amount">\n          <span>').concat(t.t("Filter.from"),'</span>\n          <span class="js-s3d-filter__mini-info__area--amount-from" data-type="min">0</span>\n          <span>').concat(t.t("Filter.to"),'</span>\n          <span class="js-s3d-filter__mini-info__area--amount-to" data-type="max">1000</span>\n        </div>\n      </div>\n      <div class="s3d-filter__mini-info__elem s3d-filter__mini-info__flat" data-type="rooms">\n        <div class="s3d-filter__mini-info__title">').concat(t.t("rooms"),':</div>\n        <div class="s3d-filter__mini-info__amount s3d-filter__mini-info__amount">\n          <span class="js-s3d-filter__mini-info__flat--amount" data-type="amount">1, 2</span>\n        </div>\n      </div>\n    </div>\n      <div class="s3d-filter__hide" id="hideFilter" data-hide-text="').concat(t.t("Filter.hide"),'" data-show-text="').concat(t.t("Filter.show"),'">').concat(t.t("Filter.hide"),'</div>\n    </div>\n    <div class="s3d-filter__table js-s3d-filter__table">\n      <div class="s3d-filter__head js-s3d-filter__head">\n          <div class="s3d-filter__tr">\n            <div class="s3d-filter__th--offset" data-sort="none"></div>\n            <div class="s3d-filter__th" data-sort="none">\n              ').concat(t.t("type"),'\n            </div>\n            <div class="s3d-filter__th" data-sort="rooms">\n              ').concat(t.t("rooms"),'\n              <svg class="s3d-sort__arrow" width="5" height="3" viewBox="0 0 5 3" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M-4.76837e-07 3L2.5 2.5828e-07L5 3L2.87764 3L2.12236 3L-4.76837e-07 3Z"></path>\n              </svg>\n            </div>\n            <div class="s3d-filter__th" data-sort="floor">\n              ').concat(t.t("floor"),'\n              <svg class="s3d-sort__arrow" width="5" height="3" viewBox="0 0 5 3" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M-4.76837e-07 3L2.5 2.5828e-07L5 3L2.87764 3L2.12236 3L-4.76837e-07 3Z"></path>\n              </svg>\n            </div>\n            <div class="s3d-filter__th" data-sort="area">\n              ').concat(t.t("area"),' м<sup>2</sup>\n              <svg class="s3d-sort__arrow" width="5" height="3" viewBox="0 0 5 3" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M-4.76837e-07 3L2.5 2.5828e-07L5 3L2.87764 3L2.12236 3L-4.76837e-07 3Z"></path>\n              </svg>\n            </div>\n            <div class="s3d-filter__th" data-sort="none">').concat(t.t("favourite--add"),'</div>\n            <div class="s3d-filter__th--offset" data-sort="none"></div>\n          </div>\n        </div>\n      <table>\n        <colgroup>\n          <col>\n          <col span="5" >\x3c!-- С помощью этой конструкции задаем цвет фона для первых двух столбцов таблицы--\x3e\n          <col>\n        </colgroup>\n        \n        \n        <tbody class="s3d-filter__body js-s3d-filter__body"></tbody>\n      </table>\n    </div>\n    <picture class="s3d-filter__bg">\n        <source media="(min-width:993px)" srcset="/wp-content/themes/').concat(nameProject,'/assets/s3d/images/filter-bg.jpg">\n        <source media="(min-width:601px;max-width:992px)" srcset="/wp-content/themes/').concat(nameProject,'/assets/s3d/images/filter-bg-table.jpg">\n        <source media="(max-width:600px)" srcset="/wp-content/themes/').concat(nameProject,'/assets/s3d/images/filter-bg.jpg">\n        <img src="/wp-content/themes/').concat(nameProject,'/assets/s3d/images/filter-bg.jpg" />\n    </picture>\n \n    <div class="s3d-filter__amount-flat">').concat(t.t("found"),'\n    <span class="s3d-filter__amount-flat__num js-s3d__amount-flat__num">25</span>\n    ').concat(t.t("found--from"),'\n    <span class="s3d-filter__amount-flat__num js-s3d__amount-flat__num-all">456</span></div>\n  </div>\n')}(t);document.querySelector(".js-s3d__slideModule").insertAdjacentHTML("afterbegin",[e,n,a,o].join(""))};function de(){return(de=i()(l.a.mark((function t(){var e,n,a,r,i,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return window.createMarkup=w,n=new Promise((function(t,n){d.a.ajax("".concat(defaultStaticPath,"/settings.json")).then((function(n){e=n,t(n)}))})),t.next=4,n;case 4:e=t.sent,(a=document.querySelector(".screen__lang"))&&document.querySelector(".header__call").insertAdjacentElement("beforeBegin",a),r=document.querySelector("html").lang||"uk",(i=u.a.createInstance()).use(p.a).init({lng:r,debug:!0,resources:m}),s=new Promise((function(t){y(t,e.flyby[1].outside,nameProject)})),Promise.all([i,s]).then((function(t){var n=o()(t,2),a=(n[0],n[1]);document.documentElement.style.setProperty("--vh","".concat(.01*window.innerHeight,"px")),(g("mobile")||document.documentElement.offsetWidth<=768)&&document.querySelector(".js-s3d__slideModule").classList.add("s3d-mobile"),ce(i),e.browser=Object.assign(b(),a);var r=new se(e,i),s=new le(r,{switch:d()(".js-s3d-nav__btn"),choose:d()("[data-choose-type]"),wrapper:d()(".js-s3d__slideModule")});new T(r,s),r.init(),window.addEventListener("resize",(function(){document.documentElement.style.setProperty("--vh","".concat(.01*window.innerHeight,"px"));var t=document.querySelector(".js-s3d__slideModule");t.classList.remove("s3d-mobile"),(g("mobile")||document.documentElement.offsetWidth<=768)&&t.classList.add("s3d-mobile")}))})).catch((function(t){console.error(t)}));case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}window.checkValue=function(t){return!t||null==t||"number"==typeof t&&isNaN(t)}}});